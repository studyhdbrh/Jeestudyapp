<meta name='viewport' content='width=device-width, initial-scale=1'/><!DOCTYPE html>
<html lang="en">
<head>
    <link rel="manifest" href="manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(() => console.log('Service Worker Registered'));
        }
    </script>
    
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2075389677786961"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #e0e5ff;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --success-light: #e6f7fd;
            --warning: #f72585;
            --warning-light: #fde6ef;
            --danger: #ef233c;
            --danger-light: #fde6e9;
            --info: #7209b7;
            --background: #f8f9fa;
            --card-bg: #ffffff;
            --text: #333333;
            --text-light: #6c757d;
            --border: #dee2e6;
            --sidebar-width: 280px;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 14px;
            --transition: all 0.2s ease;
        }

        [data-theme="dark"] {
            --primary: #4361ee;
            --primary-light: #1a2238;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #343a40;
            --dark: #f8f9fa;
            --success: #4cc9f0;
            --success-light: #0a2e3d;
            --warning: #f72585;
            --warning-light: #3a0a22;
            --danger: #ef233c;
            --danger-light: #3d0a11;
            --info: #9b4dff;
            --background: #212529;
            --card-bg: #2b3035;
            --text: #f8f9fa;
            --text-light: #adb5bd;
            --border: #495057;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--border);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary);
        }

        /* Sidebar styles */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--card-bg);
            border-right: 1px solid var(--border);
            padding: 20px 0;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .sidebar-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sidebar-title i {
            font-size: 20px;
        }

        .sidebar-menu {
            list-style: none;
        }

        .sidebar-item {
            margin-bottom: 5px;
            position: relative;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: var(--text);
            text-decoration: none;
            gap: 10px;
            border-left: 3px solid transparent;
            transition: var(--transition);
        }

        .sidebar-link:hover {
            background-color: var(--border);
        }

        .sidebar-link.active {
            border-left: 3px solid var(--primary);
            background-color: var(--primary-light);
            color: var(--primary);
            font-weight: 500;
        }

        .sidebar-link i {
            width: 20px;
            text-align: center;
        }

        .sidebar-badge {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
        }

        /* Main content styles */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 25px;
            transition: margin-left 0.3s;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header styles */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 28px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .profile {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
        }

        .profile-info {
            text-align: right;
        }

        .profile-name {
            font-weight: 600;
        }

        .profile-class {
            font-size: 12px;
            color: var(--text-light);
        }

        .profile-img {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 18px;
            transition: var(--transition);
        }

        .profile-img:hover {
            transform: scale(1.05);
        }

        .theme-toggle {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 30px;
            padding: 8px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            box-shadow: var(--shadow-sm);
        }

        .theme-toggle i {
            font-size: 16px;
        }

        /* Dashboard layout */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        @media (max-width: 1200px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

        /* Card styles */
        .card {
            background-color: var(--card-bg);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title i {
            font-size: 16px;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        /* Button styles */
        .btn {
            padding: 8px 16px;
            border-radius: var(--radius-sm);
            border: none;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            transition: var(--transition);
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-success:hover {
            background-color: #3aa8d8;
        }

        .btn-warning {
            background-color: var(--warning);
            color: white;
        }

        .btn-warning:hover {
            background-color: #d61f6b;
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #d61a2a;
        }

        .btn-info {
            background-color: var(--info);
            color: white;
        }

        .btn-info:hover {
            background-color: #5a00b0;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border);
            color: var(--text);
        }

        .btn-outline:hover {
            background-color: var(--border);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        .btn-icon {
            width: 32px;
            height: 32px;
            padding: 0;
            justify-content: center;
            border-radius: 50%;
        }

        /* Task list styles */
        .task-list {
            list-style: none;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 10px;
            background-color: var(--card-bg);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .task-item:hover {
            transform: translateX(2px);
            box-shadow: var(--shadow-sm);
        }

        .task-item.completed {
            background-color: var(--success-light);
            border-color: var(--success);
        }

        .task-item.backlog {
            background-color: var(--warning-light);
            border-color: var(--warning);
        }

        .task-item.high-priority {
            border-left: 3px solid var(--danger);
        }

        .task-item.medium-priority {
            border-left: 3px solid var(--warning);
        }

        .task-item.low-priority {
            border-left: 3px solid var(--success);
        }

        .task-content {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-grow: 1;
        }

        .task-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--success);
        }

        .task-name {
            flex-grow: 1;
            font-weight: 500;
        }

        .task-name.completed {
            text-decoration: line-through;
            color: var(--text-light);
        }

        .task-date {
            font-size: 12px;
            color: var(--text-light);
            margin-right: 10px;
            min-width: 80px;
            text-align: right;
        }

        .task-priority {
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 10px;
            margin-right: 8px;
        }

        .task-priority.high {
            background-color: var(--danger-light);
            color: var(--danger);
        }

        .task-priority.medium {
            background-color: var(--warning-light);
            color: var(--warning);
        }

        .task-priority.low {
            background-color: var(--success-light);
            color: var(--success);
        }

        .task-actions {
            display: flex;
            gap: 5px;
        }

        /* Stats container */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background-color: var(--card-bg);
            border-radius: var(--radius-md);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .stat-icon {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin: 5px 0;
            color: var(--primary);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .streak {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .streak i {
            color: var(--warning);
        }

        /* Progress styles */
        .progress-container {
            margin-top: 20px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .progress-title {
            font-size: 14px;
            font-weight: 500;
        }

        .progress-percentage {
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
        }

        .progress-bar {
            height: 10px;
            background-color: var(--border);
            border-radius: 5px;
            margin-bottom: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 5px;
            transition: width 0.3s;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(3px);
        }

        .modal-content {
            background-color: var(--card-bg);
            border-radius: var(--radius-md);
            width: 90%;
            max-width: 500px;
            padding: 25px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text);
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--danger);
            transform: rotate(90deg);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--border);
        }

        /* Form styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            background-color: var(--card-bg);
            color: var(--text);
            font-family: 'Poppins', sans-serif;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(67, 97, 238, 0.2);
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%236c757d' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 12px;
        }

        /* Tabs styles */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-weight: 500;
            transition: var(--transition);
        }

        .tab:hover {
            color: var(--primary);
        }

        .tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Calendar styles */
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 15px;
        }

        .calendar-header {
            font-weight: 600;
            text-align: center;
            padding: 8px 5px;
            font-size: 12px;
            color: var(--text-light);
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 14px;
            border: 1px solid transparent;
            transition: var(--transition);
            position: relative;
            padding-top: 5px;
        }

        .calendar-day:hover {
            background-color: var(--border);
        }

        .calendar-day.today {
            background-color: var(--primary);
            color: white;
            font-weight: 600;
        }

        .calendar-day.completed {
            background-color: var(--success-light);
            color: var(--success);
            border-color: var(--success);
        }

        .calendar-day.missed {
            background-color: var(--danger-light);
            color: var(--danger);
            border-color: var(--danger);
        }

        .calendar-day.holiday {
            background-color: var(--warning-light);
            color: var(--warning);
            border-color: var(--warning);
        }

        .calendar-day.leave {
            background-color: var(--info);
            color: white;
        }

        .calendar-day-number {
            font-weight: 600;
        }

        .calendar-day-events {
            position: absolute;
            bottom: 3px;
            display: flex;
            gap: 2px;
        }

        .calendar-day-event {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            background-color: currentColor;
        }

        /* Empty state styles */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-light);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--text);
        }

        .empty-state p {
            margin-top: 10px;
            font-size: 14px;
        }

        /* Badge styles */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            background-color: var(--border);
            color: var(--text);
        }

        .badge-primary {
            background-color: var(--primary);
            color: white;
        }

        .badge-success {
            background-color: var(--success);
            color: white;
        }

        .badge-warning {
            background-color: var(--warning);
            color: white;
        }

        .badge-danger {
            background-color: var(--danger);
            color: white;
        }

        .badge-info {
            background-color: var(--info);
            color: white;
        }

        /* Holiday item styles */
        .holiday-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 10px;
            background-color: var(--warning-light);
            border-radius: var(--radius-sm);
            border: 1px solid var(--warning);
            transition: var(--transition);
        }

        .holiday-item.leave {
            background-color: var(--info);
            border-color: var(--info);
            color: white;
        }

        .holiday-item:hover {
            transform: translateX(2px);
            box-shadow: var(--shadow-sm);
        }

        .holiday-name {
            font-weight: 500;
        }

        .holiday-date {
            font-size: 12px;
            color: var(--text-light);
        }

        .holiday-item.leave .holiday-date {
            color: rgba(255, 255, 255, 0.8);
        }

        /* Menu toggle */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 22px;
            color: var(--text);
            cursor: pointer;
            margin-right: 15px;
            transition: var(--transition);
        }

        .menu-toggle:hover {
            color: var(--primary);
        }

        /* Profile modal */
        .profile-modal-content {
            background-color: var(--card-bg);
            border-radius: var(--radius-md);
            width: 90%;
            max-width: 450px;
            padding: 25px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
        }

        .profile-preview {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .profile-preview-img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 600;
        }

        .profile-preview-info h3 {
            margin-bottom: 5px;
            font-size: 20px;
        }

        .profile-preview-info p {
            color: var(--text-light);
            font-size: 14px;
        }

        /* Timer styles */
        .timer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 30px;
            background-color: var(--primary-light);
            border-radius: var(--radius-md);
            margin-bottom: 25px;
        }

        .timer-display {
            font-size: 48px;
            font-weight: 700;
            margin: 20px 0;
            font-family: monospace;
            color: var(--primary);
        }

        .timer-controls {
            display: flex;
            gap: 15px;
        }

        /* Study session history */
        .session-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 10px;
            background-color: var(--card-bg);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
        }

        .session-subject {
            font-weight: 500;
        }

        .session-duration {
            font-size: 14px;
            color: var(--text-light);
        }

        /* Responsive styles */
        @media (max-width: 992px) {
            .main-content {
                padding: 20px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
                z-index: 1000;
                box-shadow: var(--shadow-lg);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .menu-toggle {
                display: block;
            }
        }

        @media (max-width: 576px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .header-actions {
                width: 100%;
                justify-content: space-between;
            }

            .stats-container {
                grid-template-columns: 1fr 1fr;
            }

            .timer-controls {
                flex-direction: column;
                width: 100%;
            }

            .timer-controls .btn {
                width: 100%;
            }
        }

        /* Animation classes */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        /* Footer styles */
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
            color: var(--text-light);
            font-size: 14px;
        }

        /* Custom scroll container */
        .scroll-container {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        /* Notification styles */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--success);
            color: white;
            padding: 12px 20px;
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1100;
            animation: slideIn 0.3s ease;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification.error {
            background-color: var(--danger);
        }

        .notification.warning {
            background-color: var(--warning);
        }

        @keyframes slideIn {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Confetti effect */
    /* Test specific styles */
.test-subjects {
    display: flex;
    gap: 10px;
    margin-top: 5px;
}

.test-subject-badge {
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 12px;
    background-color: var(--primary-light);
    color: var(--primary);
}

.test-score {
    font-weight: 600;
    color: var(--primary);
}

.test-score-container {
    display: flex;
    gap: 10px;
    margin-top: 5px;
}

.test-score-item {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 12px;
}

.test-score-color {
    width: 10px;
    height: 10px;
    border-radius: 50%;
}

.test-score-color.physics {
    background-color: #4361ee;
}

.test-score-color.chemistry {
    background-color: #4cc9f0;
}

.test-score-color.maths {
    background-color: #f72585;
}
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: #f00;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1001;
        }

        /* Pomodoro timer styles */
        .pomodoro-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .pomodoro-tab {
            padding: 8px 20px;
            cursor: pointer;
            border-radius: var(--radius-sm);
            margin: 0 5px;
            font-weight: 500;
            transition: var(--transition);
        }

        .pomodoro-tab.active {
            background-color: var(--primary);
            color: white;
        }

        /* Resource styles */
        .resource-card {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 15px;
            background-color: var(--card-bg);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            transition: var(--transition);
        }

        .resource-card:hover {
            transform: translateX(3px);
            box-shadow: var(--shadow-sm);
        }

        .resource-icon {
            font-size: 24px;
            margin-right: 15px;
            color: var(--primary);
        }

        .resource-info {
            flex: 1;
        }

        .resource-title {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .resource-link {
            font-size: 12px;
            color: var(--text-light);
            word-break: break-all;
        }

        /* Notes styles */
        .notes-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .note-card {
            background-color: var(--card-bg);
            border-radius: var(--radius-sm);
            padding: 15px;
            border: 1px solid var(--border);
            transition: var(--transition);
            min-height: 150px;
            display: flex;
            flex-direction: column;
        }

        .note-card:hover {
            box-shadow: var(--shadow-sm);
        }

        .note-title {
            font-weight: 500;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px solid var(--border);
        }

        .note-content {
            flex: 1;
            margin-bottom: 10px;
            font-size: 14px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 5;
            -webkit-box-orient: vertical;
        }

        .note-date {
            font-size: 12px;
            color: var(--text-light);
            text-align: right;
        }
        /* Timetable styles */
.timetable-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.timetable-slot {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    background-color: var(--card-bg);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    transition: var(--transition);
}

.timetable-slot:hover {
    transform: translateX(2px);
    box-shadow: var(--shadow-sm);
}

.timetable-slot-time {
    width: 150px;
    font-weight: 500;
    color: var(--primary);
}

.timetable-slot-task {
    flex: 1;
}

.timetable-slot-actions {
    display: flex;
    gap: 5px;
}
    </style>
<!-- Your other head content -->
    <style>
        .profile-modal {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title">
                <i class="fas fa-book-open"></i>
                <span>Study Tracker</span>
            </div>
            <button class="btn btn-icon btn-outline" id="sidebarToggle">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <ul class="sidebar-menu">
            <li class="sidebar-item">
                <a href="#" class="sidebar-link active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                    <span class="sidebar-badge" id="pendingTasksBadge">0</span>
                </a>
            </li>
             <li class="sidebar-item">
  <a href="#" class="sidebar-link" data-page="syllabusdone">
    <i class="fas fa-book-reader"></i>
    <span>Syllabus Done</span>
  </a>
</li>

             
            <li class="sidebar-item">
    <a href="#" class="sidebar-link" data-page="tests">
        <i class="fas fa-clipboard-check"></i>
        <span>Test(üë®‚Äçüíªbeta)</span>
        <span class="sidebar-badge" id="upcomingTestsBadge">0</span>
    </a>
</li>
            <li class="sidebar-item">
    <a href="#" class="sidebar-link" data-page="import">
        <i class="fas fa-file-import"></i>
        <span>Import Plans</span>
    </a>
</li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link" data-page="calendar">
                    <i class="far fa-calendar-alt"></i>
                    <span>Calendar</span>
                </a>
            </li>
            <li class="sidebar-item">
    <a href="#" class="sidebar-link" data-page="timetable">
        <i class="fas fa-calendar-alt"></i>
        <span>Timetable</span>
    </a>
</li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link" data-page="tasks">
                    <i class="fas fa-tasks"></i>
                    <span>Tasks</span>
                    <span class="sidebar-badge" id="allTasksBadge">0</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link" data-page="pomodoro">
                    <i class="fas fa-clock"></i>
                    <span>Pomodoro Timer</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link" data-page="holidays">
                    <i class="fas fa-umbrella-beach"></i>
                    <span>Holidays</span>
                    <span class="sidebar-badge" id="holidaysBadge">0</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link" data-page="stats">
                    <i class="fas fa-chart-line"></i>
                    <span>Statistics(üë®‚Äçüíªbeta)</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link" data-page="resources">
                    <i class="fas fa-book"></i>
                    <span>Resources</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link" data-page="notes">
                    <i class="fas fa-sticky-note"></i>
                    <span>Notes</span>
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <header>
                <div style="display: flex; align-items: center;">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="logo">
                        <i class="fas fa-book-open"></i>
                        <span>Study Tracker</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="theme-toggle" id="themeToggle">
                        <i class="fas fa-moon"></i>
                        <span>Dark Mode</span>
                    </button>
                    <div class="profile" id="profileBtn">
                        <div class="profile-info">
                            <div class="profile-name" id="profileName">Amit kumar</div>
                            <div class="profile-class" id="profileClass">Class: 11</div>
                        </div>
                        <div class="profile-img" id="profileImg">?</div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content (Default View) -->
            <div id="dashboardPage" class="page-content">
                <div class="motivation pulse" id="dailyMotivation">
                    ü™ß Instructions :- To see üôà any old data üìá re-enter some your old data and verifyüîê yourself then all data will get loads ü§´
                </div>

                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="stat-value" id="currentStreak">0</div>
                        <div class="stat-label">Current Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-value" id="tasksCompleted">0</div>
                        <div class="stat-label">Tasks Completed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                        <div class="stat-value" id="backlogTasks">0</div>
                        <div class="stat-label">Backlog Tasks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <div class="stat-value" id="completionRate">0%</div>
                        <div class="stat-label">Completion Rate</div>
                    </div>
                </div>

                <div class="dashboard">
                    <div class="column">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-calendar-day"></i>
                                    Today's Tasks
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-icon btn-outline" id="showCalendarBtn" title="View Calendar">
                                        <i class="far fa-calendar"></i>
                                    </button>
                                    <button class="btn btn-icon btn-outline" id="addHolidayBtn" title="Add Holiday/Leave">
                                        <i class="fas fa-umbrella-beach"></i>
                                    </button>
                                    <button class="btn btn-icon btn-outline" id="addTaskBtn" title="Add Task">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="progress-container">
                                <div class="progress-header">
                                    <div class="progress-title">Today's Progress</div>
                                    <div class="progress-percentage" id="todayProgressPercentage">0%</div>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="todayProgress"></div>
                                </div>
                            </div>
                            <ul class="task-list" id="todayTasks">
                                <!-- Today's tasks will be added here -->
                            </ul>
                            <div class="card-actions" style="justify-content: space-between; margin-top: 15px;">
                                <button class="btn btn-success" id="completeAllBtn">
                                    <i class="fas fa-check-circle"></i> Complete All
                                </button>
                                <button class="btn btn-info" id="takeLeaveBtn">
                                    <i class="fas fa-bed"></i> Take Leave
                                </button>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-calendar-week"></i>
                                    Upcoming Tasks (Next 7 Days)
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-icon btn-outline" id="addUpcomingTaskBtn" title="Add Task">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <ul class="task-list" id="upcomingTasks">
                                <!-- Upcoming tasks will be added here -->
                            </ul>
                        </div>
                    </div>

                    <div class="column">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    Backlog Tasks
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-icon btn-outline" id="clearBacklogBtn" title="Clear Backlog">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                    <button class="btn btn-icon btn-outline" id="rescheduleBacklogBtn" title="Reschedule">
                                        <i class="fas fa-calendar-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <ul class="task-list" id="backlogList">
                                <!-- Backlog tasks will be added here -->
                            </ul>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">
                                    <i class="fas fa-history"></i>
                                    Recent Completed Tasks
                                </div>
                                <div class="card-actions">
                                    <button class="btn btn-icon btn-outline" id="clearHistoryBtn" title="Clear History">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <ul class="task-list" id="completedTasks">
                                <!-- Completed tasks will be added here -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendar Page -->
             <div id="syllabusdonePage" class="page-content" style="display: none;">
  <div class="card">
    <div class="card-header">
      <div class="card-title">
        <i class="fas fa-book-reader"></i>
        Syllabus Done Entry
      </div>
    </div>
    <div class="card-body">
      <form id="syllabusForm">
        <div class="form-group">
          <label class="form-label">Chapter Name</label>
          <input type="text" class="form-control" id="chapterName" required>
        </div>
        <div class="form-group">
          <label class="form-label">Class</label>
          <input type="text" class="form-control" id="className" required>
        </div>
        <div class="form-group">
          <label class="form-label">Avg Marks (out of 60)</label>
          <input type="number" class="form-control" id="avgMarks" required>
        </div>
        <div class="form-group">
          <label class="form-label">Chapter Level</label>
          <select class="form-control form-select" id="chapterLevel" required>
            <option value="mains">Mains</option>
            <option value="mid">Mid</option>
            <option value="adv">Adv</option>
          </select>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> Save Chapter
          </button>
        </div>
      </form>
      <div id="syllabusOutput" style="margin-top: 20px;"></div>
    </div>
  </div>
</div>

             
            <!-- Tests Page -->
<div id="testsPage" class="page-content" style="display: none;">
    <div class="card">
        <div class="card-header">
            <div class="card-title">
                <i class="fas fa-clipboard-check"></i>
                Test Management 
            </div>
            <button class="btn btn-primary" id="addTestBtn">
                <i class="fas fa-plus"></i> Add Test
            </button>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="upcoming">Upcoming Tests</div>
            <div class="tab" data-tab="completed">Completed Tests</div>
            <div class="tab" data-tab="syllabus">Syllabus</div>
            <div class="tab" data-tab="performance">Performance</div>
        </div>
        
        <div class="tab-content active" id="upcomingTab">
            <div class="scroll-container">
                <ul class="task-list" id="upcomingTestsList">
                    <!-- Upcoming tests will be listed here -->
                </ul>
            </div>
        </div>
        
        <div class="tab-content" id="completedTab" style="display: none;">
            <div class="scroll-container">
                <ul class="task-list" id="completedTestsList">
                    <!-- Completed tests will be listed here -->
                </ul>
            </div>
        </div>
        
        <div class="tab-content" id="syllabusTab" style="display: none;">
            <div class="card" style="margin-bottom: 20px;">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-book"></i>
                        Syllabus Coverage
                    </div>
                </div>
                <div style="padding: 20px;">
                    <div class="form-group">
                        <label class="form-label">Physics Syllabus Covered (%)</label>
                        <input type="range" class="form-control" id="physicsSyllabus" min="0" max="100" value="0">
                        <div style="text-align: center; margin-top: 5px;">
                            <span id="physicsSyllabusValue">0%</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Chemistry Syllabus Covered (%)</label>
                        <input type="range" class="form-control" id="chemistrySyllabus" min="0" max="100" value="0">
                        <div style="text-align: center; margin-top: 5px;">
                            <span id="chemistrySyllabusValue">0%</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Maths Syllabus Covered (%)</label>
                        <input type="range" class="form-control" id="mathsSyllabus" min="0" max="100" value="0">
                        <div style="text-align: center; margin-top: 5px;">
                            <span id="mathsSyllabusValue">0%</span>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-primary" id="saveSyllabusBtn">
                            <i class="fas fa-save"></i> Save Syllabus
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="performanceTab" style="display: none;">
            <div style="padding: 20px;">
                <canvas id="testPerformanceChart" height="300"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- Add Test Modal -->
<div class="modal" id="addTestModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">Add New Test</div>
            <button class="modal-close" id="closeAddTestModal">&times;</button>
        </div>
        <div class="form-group">
            <label class="form-label">Test Name</label>
            <input type="text" class="form-control" id="testName" placeholder="Enter test name">
        </div>
        <div class="form-group">
            <label class="form-label">Date</label>
            <input type="date" class="form-control" id="testDate">
        </div>
        <div class="form-group">
            <label class="form-label">Subjects</label>
            <div style="display: flex; gap: 10px; margin-top: 5px;">
                <label style="display: flex; align-items: center; gap: 5px;">
                    <input type="checkbox" id="testPhysics" checked> Physics
                </label>
                <label style="display: flex; align-items: center; gap: 5px;">
                    <input type="checkbox" id="testChemistry" checked> Chemistry
                </label>
                <label style="display: flex; align-items: center; gap: 5px;">
                    <input type="checkbox" id="testMaths" checked> Maths
                </label>
            </div>
        </div>
        <div class="form-group">
            <label class="form-label">Notes (optional)</label>
            <textarea class="form-control" id="testNotes" rows="3" placeholder="Any additional notes about the test..."></textarea>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" id="cancelTestBtn">
                Cancel
            </button>
            <button class="btn btn-primary" id="saveTestBtn">
                <i class="fas fa-save"></i> Save Test
            </button>
        </div>
    </div>
</div>

<!-- Submit Test Score Modal -->
<div class="modal" id="submitScoreModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">Submit Test Score</div>
            <button class="modal-close" id="closeSubmitScoreModal">&times;</button>
        </div>
        <div class="form-group">
            <label class="form-label">Physics Score (out of 60)</label>
            <input type="number" class="form-control" id="physicsScore" min="0" max="60" value="0">
        </div>
        <div class="form-group">
            <label class="form-label">Chemistry Score (out of 60)</label>
            <input type="number" class="form-control" id="chemistryScore" min="0" max="60" value="0">
        </div>
        <div class="form-group">
            <label class="form-label">Maths Score (out of 60)</label>
            <input type="number" class="form-control" id="mathsScore" min="0" max="60" value="0">
        </div>
        <div class="form-group">
            <label class="form-label">Total Score (out of 180)</label>
            <input type="number" class="form-control" id="totalScore" min="0" max="180" value="0" readonly>
        </div>
        <div class="form-group">
            <label class="form-label">Percentage</label>
            <input type="text" class="form-control" id="testPercentage" value="0%" readonly>
        </div>
        <div class="form-group">
            <label class="form-label">Remarks</label>
            <textarea class="form-control" id="testRemarks" rows="2" placeholder="Any remarks about your performance..."></textarea>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" id="cancelSubmitScoreBtn">
                Cancel
            </button>
            <button class="btn btn-primary" id="saveTestScoreBtn">
                <i class="fas fa-save"></i> Submit Score
            </button>
        </div>
    </div>
</div>
            <div id="calendarPage" class="page-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="far fa-calendar-alt"></i>
                            Calendar View
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-primary" id="addCalendarHolidayBtn">
                                <i class="fas fa-plus"></i> Add Holiday/Leave
                            </button>
                        </div>
                    </div>
                    <div class="tabs">
                        <div class="tab active" data-tab="month">Month</div>
                        <div class="tab" data-tab="week">Week</div>
                        <div class="tab" data-tab="day">Day</div>
                    </div>
                    <div class="tab-content active" id="monthTab">
                        <div id="calendarMonth"></div>
                    </div>
                    <div class="tab-content" id="weekTab" style="display: none;">
                        <div id="calendarWeek"></div>
                    </div>
                    <div class="tab-content" id="dayTab" style="display: none;">
                        <div id="calendarDay"></div>
                    </div>
                </div>
            </div>

            <!-- Tasks Page -->
            <div id="tasksPage" class="page-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-tasks"></i>
                            All Tasks
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-primary" id="addTaskPageBtn">
                                <i class="fas fa-plus"></i> Add Task
                            </button>
                            <button class="btn btn-outline" id="filterTasksBtn">
                                <i class="fas fa-filter"></i> Filter
                            </button>
                        </div>
                    </div>
                    <div class="tabs">
                        <div class="tab active" data-tab="all">All</div>
                        <div class="tab" data-tab="active">Active</div>
                        <div class="tab" data-tab="completed">Completed</div>
                    </div>
                    <ul class="task-list" id="allTasksList">
                        <!-- All tasks will be listed here -->
                    </ul>
                </div>
            </div>

            <!-- Pomodoro Timer Page -->
            <div id="pomodoroPage" class="page-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-clock"></i>
                            Pomodoro Timer
                        </div>
                    </div>
                    <div class="pomodoro-tabs">
                        <div class="pomodoro-tab active" data-pomodoro="pomodoro">Pomodoro</div>
                        <div class="pomodoro-tab" data-pomodoro="shortBreak">Short Break</div>
                        <div class="pomodoro-tab" data-pomodoro="longBreak">Long Break</div>
                    </div>
                    <div class="timer-container">
                        <div class="timer-display" id="timerDisplay">25:00</div>
                        <div class="timer-controls">
                            <button class="btn btn-primary" id="startTimerBtn">
                                <i class="fas fa-play"></i> Start
                            </button>
                            <button class="btn btn-outline" id="pauseTimerBtn" disabled>
                                <i class="fas fa-pause"></i> Pause
                            </button>
                            <button class="btn btn-outline" id="resetTimerBtn">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-history"></i>
                                Session History
                            </div>
                        </div>
                        <div id="sessionHistory">
                            <!-- Session history will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Holidays Page -->
            <div id="holidaysPage" class="page-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-umbrella-beach"></i>
                            Holidays & Leaves
                        </div>
                        <button class="btn btn-primary" id="addHolidayPageBtn">
                            <i class="fas fa-plus"></i> Add Holiday/Leave
                        </button>
                    </div>
                    <div id="holidaysPageList">
                        <!-- Holidays will be listed here -->
                    </div>
                </div>
            </div>

            <!-- Statistics Page -->
            <div id="statsPage" class="page-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-line"></i>
                            Study Statistics
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-outline" id="exportStatsBtn">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>
                    <div class="tabs">
                        <div class="tab active" data-tab="overview">Overview</div>
                        <div class="tab" data-tab="daily">Daily</div>
                        <div class="tab" data-tab="weekly">Weekly</div>
                        <div class="tab" data-tab="monthly">Monthly</div>
                    </div>
                    <div class="tab-content active" id="overviewTab">
                        <div style="padding: 20px;">
                            <canvas id="statsChart" height="300"></canvas>
                        </div>
                    </div>
                    <div class="tab-content" id="dailyTab" style="display: none;">
                        <div style="padding: 20px;">
                            <canvas id="dailyChart" height="300"></canvas>
                        </div>
                    </div>
                    <div class="tab-content" id="weeklyTab" style="display: none;">
                        <div style="padding: 20px;">
                            <canvas id="weeklyChart" height="300"></canvas>
                        </div>
                    </div>
                    <div class="tab-content" id="monthlyTab" style="display: none;">
                        <div style="padding: 20px;">
                            <canvas id="monthlyChart" height="300"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resources Page -->
            <div id="resourcesPage" class="page-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-book"></i>
                            Study Resources
                        </div>
                        <button class="btn btn-primary" id="addResourceBtn">
                            <i class="fas fa-plus"></i> Add Resource
                        </button>
                    </div>
                    <div id="resourcesList">
                        <!-- Resources will be listed here -->
                    </div>
                </div>
            </div>

            <!-- Notes Page -->
            <div id="notesPage" class="page-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-sticky-note"></i>
                            Study Notes
                        </div>
                        <button class="btn btn-primary" id="addNoteBtn">
                            <i class="fas fa-plus"></i> Add Note
                        </button>
                    </div>
                    <div class="notes-container" id="notesList">
                        <!-- Notes will be listed here -->
                    </div>
                </div>
            </div>

            <!-- Import Page -->
             
            <!-- Timetable Page -->
<div id="timetablePage" class="page-content" style="display: none;">
    <div class="card">
        <div class="card-header">
            <div class="card-title">
                <i class="fas fa-calendar-alt"></i>
                Study Timetable
            </div>
            <button class="btn btn-primary" id="addTimetableSlotBtn">
                <i class="fas fa-plus"></i> Add Time Slot
            </button>
        </div>
        <div class="timetable-container" id="timetableSlots">
            <!-- Timetable slots will be added here -->
        </div>
    </div>
</div>
            <!-- Import Page -->
<div id="importPage" class="page-content" style="display: none;">
    <div class="card">
        <div class="card-header">
            <div class="card-title">
                <i class="fas fa-file-import"></i>
                Import Study Plans
            </div>
        </div>
        <div style="padding: 20px;">
            <div class="form-group">
                <label class="form-label">Paste your plans in the format:</label>
                <textarea class="form-control" id="plansTextarea" rows="10" placeholder="| 12-04-2025 | Saturday   | Rotational Motion Lec 14/19      | -                             | Thermodynamics Lec 1          |&#10;| 13-04-2025 | Sunday     | Rotational Motion Lec 15/19      | -                             | -          |"></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelImportBtn">
                    Cancel
                </button>
                <button class="btn btn-primary" id="processPlansBtn">
                    <i class="fas fa-file-import"></i> Import Plans
                </button>
            </div>
        </div>
    </div>
</div>
            <div id="importPage" class="page-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-file-import"></i>
                            Import Study Plans
                        </div>
                    </div>
                    <div style="padding: 20px;">
                        <div class="form-group">
                            <label class="form-label">Paste your plans in the format:</label>
                            <textarea class="form-control" id="plansTextarea" rows="10" placeholder="| 12-04-2025 | Saturday   | Rotational Motion Lec 14/19      | -                             | Thermodynamics Lec 1          |&#10;| 13-04-2025 | Sunday     | Rotational Motion Lec 15/19      | -                             | -          |"></textarea>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" id="cancelImportBtn">
                                Cancel
                            </button>
                            <button class="btn btn-primary" id="processPlansBtn">
                                <i class="fas fa-file-import"></i> Import Plans
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settingsPage" class="page-content" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-cog"></i>
                            Settings
                        </div>
                    </div>
                    <div style="padding: 20px;">
                        <div class="form-group">
                            <label class="form-label">Theme</label>
                            <div>
                                <button class="theme-toggle" id="themeTogglePage">
                                    <i class="fas fa-moon"></i>
                                    <span>Dark Mode</span>
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Pomodoro Timer Settings</label>
                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 10px;">
                                <div>
                                    <label class="form-label">Pomodoro (minutes)</label>
                                    <input type="number" class="form-control" id="pomodoroDuration" min="1" max="60" value="25">
                                </div>
                                <div>
                                    <label class="form-label">Short Break (minutes)</label>
                                    <input type="number" class="form-control" id="shortBreakDuration" min="1" max="15" value="5">
                                </div>
                                <div>
                                    <label class="form-label">Long Break (minutes)</label>
                                    <input type="number" class="form-control" id="longBreakDuration" min="1" max="30" value="15">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Data Management</label>
                            <div style="display: flex; gap: 10px; margin-top: 10px;">
                                <button class="btn btn-outline" id="exportDataBtn">
                                    <i class="fas fa-download"></i> Export Data
                                </button>
                                <button class="btn btn-outline" id="importDataBtn">
                                    <i class="fas fa-upload"></i> Import Data
                                </button>
                                <button class="btn btn-danger" id="resetDataBtn">
                                    <i class="fas fa-trash"></i> Reset Data
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer>
                <p>Study Tracker &copy; 2025 | Keep grinding, success is coming! üí™ |Telegram :- @studytracker</p>
            </footer>
        </div>
    </div>
    <!-- Add Timetable Slot Modal -->
<div class="modal" id="timetableSlotModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">Add Time Slot</div>
            <button class="modal-close" id="closeTimetableSlotModal">&times;</button>
        </div>
        <div class="form-group">
            <label class="form-label">Task Name</label>
            <input type="text" class="form-control" id="slotTaskName" placeholder="Enter task name">
        </div>
        <div class="form-group">
            <label class="form-label">Day</label>
            <select class="form-control form-select" id="slotDay">
                <option value="monday">Monday</option>
                <option value="tuesday">Tuesday</option>
                <option value="wednesday">Wednesday</option>
                <option value="thursday">Thursday</option>
                <option value="friday">Friday</option>
                <option value="saturday">Saturday</option>
                <option value="sunday">Sunday</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Start Time</label>
            <input type="time" class="form-control" id="slotStartTime">
        </div>
        <div class="form-group">
            <label class="form-label">End Time</label>
            <input type="time" class="form-control" id="slotEndTime">
        </div>
        <div class="form-group">
            <label class="form-label">Notification (minutes before)</label>
            <input type="number" class="form-control" id="slotNotification" min="0" max="60" value="5">
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" id="cancelTimetableSlotBtn">
                Cancel
            </button>
            <button class="btn btn-primary" id="saveTimetableSlotBtn">
                <i class="fas fa-save"></i> Save Slot
            </button>
        </div>
    </div>
</div>
    
 
    
    <div class="profile-modal" id="profileModal">
        <div class="profile-modal-content">
            <div class="modal-header">
                <div class="modal-title">Profile Settings</div>
                <button class="modal-close" id="closeProfileModal">&times;</button>
            </div>
            <div class="profile-preview">
                <div class="profile-preview-img" id="profilePreviewImg">G</div>
                <div class="profile-preview-info">
                    <h3 id="profilePreviewName">Guest User</h3>
                    <p id="profilePreviewClass">Class: Not Set</p>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" class="form-control" id="profileNameInput" placeholder="Enter your name">
            </div>
            <div class="form-group">
                <label class="form-label">Class/Standard</label>
                <input type="text" class="form-control" id="profileClassInput" placeholder="Enter your class">
            </div>
            <div class="form-group">
                <label class="form-label">Study Goal (hours per day)</label>
                <input type="number" class="form-control" id="studyGoalInput" min="1" max="24" placeholder="Enter your daily study goal">
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelProfileBtn">
                    Cancel
                </button>
                <button class="btn btn-primary" id="saveProfileBtn">
                    <i class="fas fa-save"></i> Save Profile
                </button>
            </div>
        </div>
    </div>
    <!-- Add Task Modal -->
    <div class="modal" id="addTaskModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add New Task</div>
                <button class="modal-close" id="closeAddTaskModal">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Task Name</label>
                <input type="text" class="form-control" id="taskName" placeholder="What do you need to study?">
            </div>
            <div class="form-group">
                <label class="form-label">Date</label>
                <input type="date" class="form-control" id="taskDate">
            </div>
            <div class="form-group">
                <label class="form-label">Subject/Category</label>
                <input type="text" class="form-control" id="taskSubject" placeholder="e.g., Mathematics, Physics">
            </div>
            <div class="form-group">
                <label class="form-label">Priority</label>
                <select class="form-control form-select" id="taskPriority">
                    <option value="low">Low</option>
                    <option value="medium" selected>Medium</option>
                    <option value="high">High</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Estimated Duration (minutes)</label>
                <input type="number" class="form-control" id="taskDuration" min="5" max="240" value="30">
            </div>
            <div class="form-group">
                <label class="form-label">Notes (optional)</label>
                <textarea class="form-control" id="taskNotes" rows="3" placeholder="Any additional notes..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelTaskBtn">
                    Cancel
                </button>
                <button class="btn btn-primary" id="saveTaskBtn">
                    <i class="fas fa-save"></i> Save Task
                </button>
            </div>
        </div>
    </div>

    <!-- Add Holiday Modal -->
    <div class="modal" id="addHolidayModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add Holiday/Leave</div>
                <button class="modal-close" id="closeAddHolidayModal">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Name</label>
                <input type="text" class="form-control" id="holidayName" placeholder="E.g., Diwali, Christmas">
            </div>
            <div class="form-group">
                <label class="form-label">Date</label>
                <input type="date" class="form-control" id="holidayDate">
            </div>
            <div class="form-group">
                <label class="form-label">Type</label>
                <select class="form-control form-select" id="holidayType">
                    <option value="holiday">Holiday</option>
                    <option value="leave">Personal Leave</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Description (optional)</label>
                <textarea class="form-control" id="holidayDescription" rows="3" placeholder="Any additional details..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelHolidayBtn">
                    Cancel
                </button>
                <button class="btn btn-primary" id="saveHolidayBtn">
                    <i class="fas fa-save"></i> Save
                </button>
            </div>
        </div>
    </div>

    <!-- Add Resource Modal -->
    <div class="modal" id="addResourceModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add Study Resource</div>
                <button class="modal-close" id="closeAddResourceModal">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Title</label>
                <input type="text" class="form-control" id="resourceTitle" placeholder="Resource title">
            </div>
            <div class="form-group">
                <label class="form-label">Type</label>
                <select class="form-control form-select" id="resourceType">
                    <option value="book">Book</option>
                    <option value="video">Video</option>
                    <option value="website">Website</option>
                    <option value="document">Document</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">URL/Link</label>
                <input type="url" class="form-control" id="resourceUrl" placeholder="https://example.com">
            </div>
            <div class="form-group">
                <label class="form-label">Subject/Category</label>
                <input type="text" class="form-control" id="resourceSubject" placeholder="e.g., Mathematics, Physics">
            </div>
            <div class="form-group">
                <label class="form-label">Description (optional)</label>
                <textarea class="form-control" id="resourceDescription" rows="3" placeholder="Brief description of the resource..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelResourceBtn">
                    Cancel
                </button>
                <button class="btn btn-primary" id="saveResourceBtn">
                    <i class="fas fa-save"></i> Save Resource
                </button>
            </div>
        </div>
    </div>

    <!-- Add Note Modal -->
    <div class="modal" id="addNoteModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Add Study Note</div>
                <button class="modal-close" id="closeAddNoteModal">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Title</label>
                <input type="text" class="form-control" id="noteTitle" placeholder="Note title">
            </div>
            <div class="form-group">
                <label class="form-label">Subject/Category</label>
                <input type="text" class="form-control" id="noteSubject" placeholder="e.g., Mathematics, Physics">
            </div>
            <div class="form-group">
                <label class="form-label">Content</label>
                <textarea class="form-control" id="noteContent" rows="8" placeholder="Write your notes here..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelNoteBtn">
                    Cancel
                </button>
                <button class="btn btn-primary" id="saveNoteBtn">
                    <i class="fas fa-save"></i> Save Note
                </button>
            </div>
        </div>
    </div>

    <!-- View Note Modal -->
    <div class="modal" id="viewNoteModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <div class="modal-title" id="viewNoteTitle">Note Title</div>
                <button class="modal-close" id="closeViewNoteModal">&times;</button>
            </div>
            <div style="padding: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                    <div id="viewNoteSubject" style="font-weight: 500; color: var(--primary);"></div>
                    <div id="viewNoteDate" style="font-size: 14px; color: var(--text-light);"></div>
                </div>
                <div id="viewNoteContent" style="line-height: 1.8; white-space: pre-wrap;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="editNoteBtn">
                    <i class="fas fa-edit"></i> Edit
                </button>
                <button class="btn btn-danger" id="deleteNoteBtn">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </div>
        </div>
    </div>

    <!-- Import Data Modal -->
    <div class="modal" id="importDataModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Import Data</div>
                <button class="modal-close" id="closeImportDataModal">&times;</button>
            </div>
            <div style="padding: 20px;">
                <div class="form-group">
                    <label class="form-label">Select JSON file to import</label>
                    <input type="file" class="form-control" id="dataFileInput" accept=".json">
                </div>
                <div class="form-group">
                    <label class="form-label">Import Options</label>
                    <div style="margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <input type="checkbox" id="importTasks" checked> Tasks
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <input type="checkbox" id="importHolidays" checked> Holidays
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <input type="checkbox" id="importResources" checked> Resources
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="importNotes" checked> Notes
                        </label>
                    </div>
                </div>
                <div class="alert alert-warning" style="padding: 10px; background-color: var(--warning-light); border-left: 3px solid var(--warning); margin-bottom: 15px;">
                    <i class="fas fa-exclamation-triangle"></i> This will overwrite your existing data for selected items.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelImportDataBtn">
                    Cancel
                </button>
                <button class="btn btn-primary" id="confirmImportDataBtn">
                    <i class="fas fa-upload"></i> Import Data
                </button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <div class="modal-title" id="confirmModalTitle">Confirm Action</div>
                <button class="modal-close" id="closeConfirmModal">&times;</button>
            </div>
            <div style="padding: 20px;">
                <p id="confirmModalMessage">Are you sure you want to perform this action?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelConfirmBtn">
                    Cancel
                </button>
                <button class="btn btn-danger" id="confirmActionBtn">
                    Confirm
                </button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationMessage">Task completed successfully!</span>
    </div>

    <!-- Include Chart.js for statistics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // DOM Elements
        const sidebar = document.getElementById('sidebar');
        const menuToggle = document.getElementById('menuToggle');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const themeToggle = document.getElementById('themeToggle');
        const themeTogglePage = document.getElementById('themeTogglePage');
        const todayTasksList = document.getElementById('todayTasks');
        const upcomingTasksList = document.getElementById('upcomingTasks');
        const backlogList = document.getElementById('backlogList');
        const completedTasksList = document.getElementById('completedTasks');
        const allTasksList = document.getElementById('allTasksList');
        const currentStreakElement = document.getElementById('currentStreak');
        const tasksCompletedElement = document.getElementById('tasksCompleted');
        const backlogTasksElement = document.getElementById('backlogTasks');
        const completionRateElement = document.getElementById('completionRate');
        const todayProgressElement = document.getElementById('todayProgress');
        const todayProgressPercentage = document.getElementById('todayProgressPercentage');
        const completeAllBtn = document.getElementById('completeAllBtn');
        const takeLeaveBtn = document.getElementById('takeLeaveBtn');
        const clearBacklogBtn = document.getElementById('clearBacklogBtn');
        const rescheduleBacklogBtn = document.getElementById('rescheduleBacklogBtn');
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        const showCalendarBtn = document.getElementById('showCalendarBtn');
        const addHolidayBtn = document.getElementById('addHolidayBtn');
        const addHolidayPageBtn = document.getElementById('addHolidayPageBtn');
        const addCalendarHolidayBtn = document.getElementById('addCalendarHolidayBtn');
        const calendarMonth = document.getElementById('calendarMonth');
        const calendarWeek = document.getElementById('calendarWeek');
        const calendarDay = document.getElementById('calendarDay');
        const holidaysPageList = document.getElementById('holidaysPageList');
        const addTaskBtn = document.getElementById('addTaskBtn');
        const addTaskPageBtn = document.getElementById('addTaskPageBtn');
        const addUpcomingTaskBtn = document.getElementById('addUpcomingTaskBtn');
        const saveTaskBtn = document.getElementById('saveTaskBtn');
        const taskNameInput = document.getElementById('taskName');
        const taskDateInput = document.getElementById('taskDate');
        const taskSubjectInput = document.getElementById('taskSubject');
        const taskPriorityInput = document.getElementById('taskPriority');
        const taskDurationInput = document.getElementById('taskDuration');
        const taskNotesInput = document.getElementById('taskNotes');
        const processPlansBtn = document.getElementById('processPlansBtn');
        const plansTextarea = document.getElementById('plansTextarea');
        const saveHolidayBtn = document.getElementById('saveHolidayBtn');
        const holidayNameInput = document.getElementById('holidayName');
        const holidayDateInput = document.getElementById('holidayDate');
        const holidayTypeInput = document.getElementById('holidayType');
        const holidayDescriptionInput = document.getElementById('holidayDescription');
        const dailyMotivation = document.getElementById('dailyMotivation');
        const profileBtn = document.getElementById('profileBtn');
        const profileName = document.getElementById('profileName');
        const profileClass = document.getElementById('profileClass');
        const profileImg = document.getElementById('profileImg');
        const profileModal = document.getElementById('profileModal');
        const closeProfileModal = document.getElementById('closeProfileModal');
        const saveProfileBtn = document.getElementById('saveProfileBtn');
        const cancelProfileBtn = document.getElementById('cancelProfileBtn');
        const profileNameInput = document.getElementById('profileNameInput');
        const profileClassInput = document.getElementById('profileClassInput');
        const studyGoalInput = document.getElementById('studyGoalInput');
        const profilePreviewImg = document.getElementById('profilePreviewImg');
        const profilePreviewName = document.getElementById('profilePreviewName');
        const profilePreviewClass = document.getElementById('profilePreviewClass');
        const pendingTasksBadge = document.getElementById('pendingTasksBadge');
        const allTasksBadge = document.getElementById('allTasksBadge');
        const holidaysBadge = document.getElementById('holidaysBadge');
        const notification = document.getElementById('notification');
        const notificationMessage = document.getElementById('notificationMessage');
        const timerDisplay = document.getElementById('timerDisplay');
        const startTimerBtn = document.getElementById('startTimerBtn');
        const pauseTimerBtn = document.getElementById('pauseTimerBtn');
        const resetTimerBtn = document.getElementById('resetTimerBtn');
        const sessionHistory = document.getElementById('sessionHistory');
        const pomodoroTabs = document.querySelectorAll('.pomodoro-tab');
        const pomodoroDurationInput = document.getElementById('pomodoroDuration');
        const shortBreakDurationInput = document.getElementById('shortBreakDuration');
        const longBreakDurationInput = document.getElementById('longBreakDuration');
        const resourcesList = document.getElementById('resourcesList');
        const addResourceBtn = document.getElementById('addResourceBtn');
        const saveResourceBtn = document.getElementById('saveResourceBtn');
        const resourceTitleInput = document.getElementById('resourceTitle');
        const resourceTypeInput = document.getElementById('resourceType');
        const resourceUrlInput = document.getElementById('resourceUrl');
        const resourceSubjectInput = document.getElementById('resourceSubject');
        const resourceDescriptionInput = document.getElementById('resourceDescription');
        const notesList = document.getElementById('notesList');
        const addNoteBtn = document.getElementById('addNoteBtn');
        const saveNoteBtn = document.getElementById('saveNoteBtn');
        const noteTitleInput = document.getElementById('noteTitle');
        const noteSubjectInput = document.getElementById('noteSubject');
        const noteContentInput = document.getElementById('noteContent');
        const exportDataBtn = document.getElementById('exportDataBtn');
        const importDataBtn = document.getElementById('importDataBtn');
        const resetDataBtn = document.getElementById('resetDataBtn');
        const exportStatsBtn = document.getElementById('exportStatsBtn');
        const filterTasksBtn = document.getElementById('filterTasksBtn');
        const cancelTaskBtn = document.getElementById('cancelTaskBtn');
        const cancelHolidayBtn = document.getElementById('cancelHolidayBtn');
        const cancelResourceBtn = document.getElementById('cancelResourceBtn');
        const cancelNoteBtn = document.getElementById('cancelNoteBtn');
        const cancelImportBtn = document.getElementById('cancelImportBtn');
        const viewNoteTitle = document.getElementById('viewNoteTitle');
        const viewNoteSubject = document.getElementById('viewNoteSubject');
        const viewNoteDate = document.getElementById('viewNoteDate');
        const viewNoteContent = document.getElementById('viewNoteContent');
        const editNoteBtn = document.getElementById('editNoteBtn');
        const deleteNoteBtn = document.getElementById('deleteNoteBtn');
        const dataFileInput = document.getElementById('dataFileInput');
        const importTasksCheck = document.getElementById('importTasks');
        const importHolidaysCheck = document.getElementById('importHolidays');
        const importResourcesCheck = document.getElementById('importResources');
        const importNotesCheck = document.getElementById('importNotes');
        const cancelImportDataBtn = document.getElementById('cancelImportDataBtn');
        const confirmImportDataBtn = document.getElementById('confirmImportDataBtn');
        const confirmModal = document.getElementById('confirmModal');
        const confirmModalTitle = document.getElementById('confirmModalTitle');
        const confirmModalMessage = document.getElementById('confirmModalMessage');
        const cancelConfirmBtn = document.getElementById('cancelConfirmBtn');
        const confirmActionBtn = document.getElementById('confirmActionBtn');
        const closeConfirmModal = document.getElementById('closeConfirmModal');

        // Page elements
        const pageContents = document.querySelectorAll('.page-content');
        const sidebarLinks = document.querySelectorAll('.sidebar-link');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // Initialize date
        const today = new Date();
        const tomorrow = new Date(today);
        tomorrow.setDate(tomorrow.getDate() + 1);
        
        // Format date as YYYY-MM-DD
        function formatDate(date) {
            const d = new Date(date);
            let month = '' + (d.getMonth() + 1);
            let day = '' + d.getDate();
            const year = d.getFullYear();
            
            if (month.length < 2) month = '0' + month;
            if (day.length < 2) day = '0' + day;
            
            return [year, month, day].join('-');
        }
        
        // Get today's date in YYYY-MM-DD format
        const todayFormatted = formatDate(today);
        
        // Set default date for task input to today
        taskDateInput.value = todayFormatted;
        holidayDateInput.value = todayFormatted;
        
        // Sample data (in a real app, this would come from localStorage or a database)
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let holidays = JSON.parse(localStorage.getItem('holidays')) || [];
        let resources = JSON.parse(localStorage.getItem('resources')) || [];
        let notes = JSON.parse(localStorage.getItem('notes')) || [];
        let sessions = JSON.parse(localStorage.getItem('sessions')) || [];
        let profile = JSON.parse(localStorage.getItem('profile')) || {
            name: "Amit kumar",
            class: "Class: 11",
            theme: "light",
            studyGoal: 12,
            pomodoroDuration: 25,
            shortBreakDuration: 5,
            longBreakDuration: 15
        };
        
        // Timer variables
        let timerInterval;
        let timerSeconds = profile.pomodoroDuration * 60;
        let timerRunning = false;
        let timerMode = 'pomodoro'; // 'pomodoro', 'shortBreak', 'longBreak'
        let pomodoroCount = 0;
        
        // Current editing note ID
        let currentEditingNoteId = null;
        
        // Motivational quotes
        const motivationalQuotes = [
            "The secret of getting ahead is getting started. - Mark Twain",
            "You don't have to be great to start, but you have to start to be great. - Zig Ziglar",
            "The expert in anything was once a beginner. - Helen Hayes",
            "Success is the sum of small efforts, repeated day in and day out. - Robert Collier",
            "The only way to do great work is to love what you do. - Steve Jobs",
            "Don't watch the clock; do what it does. Keep going. - Sam Levenson",
            "Believe you can and you're halfway there. - Theodore Roosevelt",
            "It always seems impossible until it's done. - Nelson Mandela",
            "The future depends on what you do today. - Mahatma Gandhi",
            "Small steps every day lead to big results. - Unknown",
            "The more you sweat in practice, the less you bleed in battle. - Unknown",
            "Success is no accident. It is hard work, perseverance, learning, studying, sacrifice and most of all, love of what you are doing. - Pel√©",
            "The difference between ordinary and extraordinary is that little extra. - Jimmy Johnson",
            "I find that the harder I work, the more luck I seem to have. - Thomas Jefferson",
            "There are no shortcuts to any place worth going. - Beverly Sills"
        ];
        
        // Initialize the app
        function initApp() {
            // Set profile
            updateProfileDisplay();
            initTests();
            
            // Set theme
            if (profile.theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i><span>Light Mode</span>';
                themeTogglePage.innerHTML = '<i class="fas fa-sun"></i><span>Light Mode</span>';
            }
            
            // Set random daily motivation
            dailyMotivation.textContent = motivationalQuotes[Math.floor(Math.random() * motivationalQuotes.length)];
            
            // Load data
            renderTasks();
            renderHolidays();
            renderCalendar();
            renderResources();
            renderNotes();
            updateTimerDisplay();
            renderSessionHistory();
            
            // Calculate and display stats
            updateStats();
            
            // Initialize charts
            initCharts();
        }
        
        // Initialize charts
        function initCharts() {
            // Overview chart (weekly completion)
            const ctx = document.getElementById('statsChart').getContext('2d');
            const weeklyCompletionChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Tasks Completed',
                        data: [12, 19, 15, 8, 10, 5, 7],
                        backgroundColor: 'rgba(67, 97, 238, 0.7)',
                        borderColor: 'rgba(67, 97, 238, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Daily chart (hours studied)
            const dailyCtx = document.getElementById('dailyChart').getContext('2d');
            const dailyChart = new Chart(dailyCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 24}, (_, i) => `${i}:00`),
                    datasets: [{
                        label: 'Study Hours',
                        data: Array.from({length: 24}, () => Math.floor(Math.random() * 10)),
                        backgroundColor: 'rgba(76, 201, 240, 0.2)',
                        borderColor: 'rgba(76, 201, 240, 1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Weekly chart (comparison)
            const weeklyCtx = document.getElementById('weeklyChart').getContext('2d');
            const weeklyChart = new Chart(weeklyCtx, {
                type: 'radar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [
                        {
                            label: 'This Week',
                            data: [12, 19, 15, 8, 10, 5, 7],
                            backgroundColor: 'rgba(67, 97, 238, 0.2)',
                            borderColor: 'rgba(67, 97, 238, 1)',
                            borderWidth: 2
                        },
                        {
                            label: 'Last Week',
                            data: [8, 12, 10, 5, 7, 3, 4],
                            backgroundColor: 'rgba(247, 37, 133, 0.2)',
                            borderColor: 'rgba(247, 37, 133, 1)',
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0
                        }
                    }
                }
            });
            
            // Monthly chart (progress)
            const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
            const monthlyChart = new Chart(monthlyCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 30}, (_, i) => i + 1),
                    datasets: [{
                        label: 'Daily Study Hours',
                        data: Array.from({length: 30}, () => Math.floor(Math.random() * 8) + 2),
                        backgroundColor: 'rgba(72, 149, 239, 0.2)',
                        borderColor: 'rgba(72, 149, 239, 1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Update profile display
        function updateProfileDisplay() {
            profileName.textContent = profile.name;
            profileClass.textContent = profile.class;
            profileImg.textContent = profile.name.charAt(0).toUpperCase();
            profilePreviewName.textContent = profile.name;
            profilePreviewClass.textContent = profile.class;
            profilePreviewImg.textContent = profile.name.charAt(0).toUpperCase();
            profileNameInput.value = profile.name;
            profileClassInput.value = profile.class.replace('Class: ', '');
            studyGoalInput.value = profile.studyGoal || 4;
            pomodoroDurationInput.value = profile.pomodoroDuration || 25;
            shortBreakDurationInput.value = profile.shortBreakDuration || 5;
            longBreakDurationInput.value = profile.longBreakDuration || 15;
        }
    // Timetable variables
let timetableSlots = JSON.parse(localStorage.getItem('timetableSlots')) || [];
let notificationTimeouts = {};

// Initialize timetable
function initTimetable() {
    renderTimetable();
    setupTimetableNotifications();
}

// Render timetable
function renderTimetable() {
    const timetableContainer = document.getElementById('timetableSlots');
    timetableContainer.innerHTML = '';
    
    if (timetableSlots.length > 0) {
        // Group slots by day
        const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
        
        days.forEach(day => {
            const daySlots = timetableSlots.filter(slot => slot.day === day);
            if (daySlots.length > 0) {
                const dayHeader = document.createElement('h3');
                dayHeader.style.margin = '15px 0 10px';
                dayHeader.textContent = day.charAt(0).toUpperCase() + day.slice(1);
                timetableContainer.appendChild(dayHeader);
                
                // Sort slots by start time
                daySlots.sort((a, b) => a.startTime.localeCompare(b.startTime));
                
                daySlots.forEach(slot => {
                    const slotElement = document.createElement('div');
                    slotElement.className = 'timetable-slot';
                    slotElement.dataset.id = slot.id;
                    
                    slotElement.innerHTML = `
                        <div class="timetable-slot-time">
                            ${formatTime(slot.startTime)} - ${formatTime(slot.endTime)}
                        </div>
                        <div class="timetable-slot-task">
                            ${slot.taskName}
                        </div>
                        <div class="timetable-slot-actions">
                            <button class="btn btn-outline btn-sm edit-slot" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline btn-sm delete-slot" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    
                    timetableContainer.appendChild(slotElement);
                    
                    // Add event listeners
                    slotElement.querySelector('.edit-slot').addEventListener('click', () => editTimetableSlot(slot.id));
                    slotElement.querySelector('.delete-slot').addEventListener('click', () => deleteTimetableSlot(slot.id));
                });
            }
        });
    } else {
        timetableContainer.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-calendar-alt"></i>
                <h3>No timetable slots added yet!</h3>
                <p>Add time slots to create your study timetable.</p>
            </div>
        `;
    }
}

// Format time for display (HH:MM to 12-hour format)
function formatTime(timeStr) {
    const [hours, minutes] = timeStr.split(':');
    const hour = parseInt(hours);
    const ampm = hour >= 12 ? 'PM' : 'AM';
    const hour12 = hour % 12 || 12;
    return `${hour12}:${minutes} ${ampm}`;
}

// Add timetable slot
function addTimetableSlot() {
    const taskName = document.getElementById('slotTaskName').value.trim();
    const day = document.getElementById('slotDay').value;
    const startTime = document.getElementById('slotStartTime').value;
    const endTime = document.getElementById('slotEndTime').value;
    const notification = parseInt(document.getElementById('slotNotification').value) || 5;
    
    if (!taskName || !startTime || !endTime) {
        showNotification('Please fill all required fields', 'error');
        return;
    }
    
    if (startTime >= endTime) {
        showNotification('End time must be after start time', 'error');
        return;
    }
    
    const newSlot = {
        id: Date.now(),
        taskName,
        day,
        startTime,
        endTime,
        notification,
        createdAt: new Date().toISOString()
    };
    
    timetableSlots.push(newSlot);
    saveTimetableSlots();
    renderTimetable();
    setupTimetableNotifications();
    
    // Reset form
    document.getElementById('slotTaskName').value = '';
    document.getElementById('slotStartTime').value = '';
    document.getElementById('slotEndTime').value = '';
    document.getElementById('slotNotification').value = '5';
    
    // Close modal
    document.getElementById('timetableSlotModal').style.display = 'none';
    
    showNotification('Time slot added successfully!', 'success');
}

// Edit timetable slot
function editTimetableSlot(slotId) {
    const slot = timetableSlots.find(s => s.id === slotId);
    if (!slot) return;
    
    // Fill the form
    document.getElementById('slotTaskName').value = slot.taskName;
    document.getElementById('slotDay').value = slot.day;
    document.getElementById('slotStartTime').value = slot.startTime;
    document.getElementById('slotEndTime').value = slot.endTime;
    document.getElementById('slotNotification').value = slot.notification;
    
    // Store slot ID in the modal
    document.getElementById('timetableSlotModal').dataset.editingId = slotId;
    
    // Change modal title
    document.querySelector('#timetableSlotModal .modal-title').textContent = 'Edit Time Slot';
    
    // Show modal
    document.getElementById('timetableSlotModal').style.display = 'flex';
}

// Save edited timetable slot
function saveEditedTimetableSlot() {
    const slotId = parseInt(document.getElementById('timetableSlotModal').dataset.editingId);
    const taskName = document.getElementById('slotTaskName').value.trim();
    const day = document.getElementById('slotDay').value;
    const startTime = document.getElementById('slotStartTime').value;
    const endTime = document.getElementById('slotEndTime').value;
    const notification = parseInt(document.getElementById('slotNotification').value) || 5;
    
    if (!taskName || !startTime || !endTime) {
        showNotification('Please fill all required fields', 'error');
        return;
    }
    
    if (startTime >= endTime) {
        showNotification('End time must be after start time', 'error');
        return;
    }
    
    timetableSlots = timetableSlots.map(slot => {
        if (slot.id === slotId) {
            return {
                ...slot,
                taskName,
                day,
                startTime,
                endTime,
                notification
            };
        }
        return slot;
    });
    
    saveTimetableSlots();
    renderTimetable();
    setupTimetableNotifications();
    
    // Reset form
    document.getElementById('slotTaskName').value = '';
    document.getElementById('slotStartTime').value = '';
    document.getElementById('slotEndTime').value = '';
    document.getElementById('slotNotification').value = '5';
    document.getElementById('timetableSlotModal').dataset.editingId = '';
    
    // Close modal
    document.getElementById('timetableSlotModal').style.display = 'none';
    
    showNotification('Time slot updated successfully!', 'success');
}

// Delete timetable slot
function deleteTimetableSlot(slotId) {
    showConfirmModal(
        'Delete Time Slot',
        'Are you sure you want to delete this time slot?',
        () => {
            timetableSlots = timetableSlots.filter(slot => slot.id !== slotId);
            saveTimetableSlots();
            renderTimetable();
            clearNotificationTimeout(slotId);
            showNotification('Time slot deleted successfully!', 'success');
        }
    );
}

// Save timetable slots to localStorage
function saveTimetableSlots() {
    localStorage.setItem('timetableSlots', JSON.stringify(timetableSlots));
}

// Setup timetable notifications
function setupTimetableNotifications() {
    // Clear all existing timeouts
    Object.values(notificationTimeouts).forEach(timeout => {
        clearTimeout(timeout);
    });
    notificationTimeouts = {};
    
    const now = new Date();
    const currentDay = now.toLocaleString('en-US', { weekday: 'long' }).toLowerCase();
    const currentTime = now.toTimeString().substring(0, 5); // HH:MM format
    
    timetableSlots.forEach(slot => {
        // Check if slot is today
        if (slot.day === currentDay) {
            const [startHour, startMinute] = slot.startTime.split(':').map(Number);
            const notificationTime = new Date();
            notificationTime.setHours(startHour, startMinute - slot.notification, 0, 0);
            
            // Calculate time until notification (in ms)
            const timeUntilNotification = notificationTime - now;
            
            if (timeUntilNotification > 0) {
                // Schedule notification
                notificationTimeouts[slot.id] = setTimeout(() => {
                    showNotification(`Upcoming task: ${slot.taskName} at ${formatTime(slot.startTime)}`, 'info');
                    
                    // Play notification sound
                    const audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3');
                    audio.play();
                    
                    // Remove from timeouts object
                    delete notificationTimeouts[slot.id];
                }, timeUntilNotification);
            }
        }
    });
}

// Clear notification timeout for a specific slot
function clearNotificationTimeout(slotId) {
    if (notificationTimeouts[slotId]) {
        clearTimeout(notificationTimeouts[slotId]);
        delete notificationTimeouts[slotId];
    }
}

// Add this to your initApp() function:
function initApp() {
    // ... existing code ...
    initTimetable();
}

// Add these event listeners:
document.getElementById('addTimetableSlotBtn').addEventListener('click', () => {
    document.querySelector('#timetableSlotModal .modal-title').textContent = 'Add Time Slot';
    document.getElementById('timetableSlotModal').dataset.editingId = '';
    document.getElementById('slotTaskName').value = '';
    document.getElementById('slotStartTime').value = '';
    document.getElementById('slotEndTime').value = '';
    document.getElementById('slotNotification').value = '5';
    document.getElementById('timetableSlotModal').style.display = 'flex';
    document.getElementById('slotTaskName').focus();
});

document.getElementById('saveTimetableSlotBtn').addEventListener('click', () => {
    const editingId = document.getElementById('timetableSlotModal').dataset.editingId;
    if (editingId) {
        saveEditedTimetableSlot();
    } else {
        addTimetableSlot();
    }
});

document.getElementById('cancelTimetableSlotBtn').addEventListener('click', () => {
    document.getElementById('timetableSlotModal').style.display = 'none';
});

document.getElementById('closeTimetableSlotModal').addEventListener('click', () => {
    document.getElementById('timetableSlotModal').style.display = 'none';
});
        
        // Render tasks
        function renderTasks() {
            // Clear lists
            todayTasksList.innerHTML = '';
            upcomingTasksList.innerHTML = '';
            backlogList.innerHTML = '';
            completedTasksList.innerHTML = '';
            allTasksList.innerHTML = '';
            
            // Filter tasks
            const todayTasks = tasks.filter(task => task.date === todayFormatted && !task.completed);
            const upcomingTasks = tasks.filter(task => {
                const taskDate = new Date(task.date);
                return taskDate > today && taskDate <= new Date(today.getTime() + 7 * 24 * 60 * 60 * 1000) && !task.completed;
            });
            const backlogTasks = tasks.filter(task => {
                const taskDate = new Date(task.date);
                return taskDate < today && !task.completed;
            });
            const completedTasks = tasks.filter(task => task.completed).slice(0, 10); // Show last 10 completed
            
            // Count all pending tasks
            const pendingTasksCount = tasks.filter(task => !task.completed).length;
            
            // Update badges
            pendingTasksBadge.textContent = pendingTasksCount > 0 ? pendingTasksCount : '';
            allTasksBadge.textContent = tasks.length > 0 ? tasks.length : '';
            
            // Render today's tasks
            if (todayTasks.length > 0) {
                todayTasks.forEach(task => {
                    todayTasksList.appendChild(createTaskElement(task));
                });
            } else {
                todayTasksList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-check-circle"></i>
                        <h3>No tasks for today!</h3>
                        <p>You're all caught up or you can add new tasks.</p>
                    </div>
                `;
            }
            
            // Render upcoming tasks
            if (upcomingTasks.length > 0) {
                upcomingTasks.forEach(task => {
                    upcomingTasksList.appendChild(createTaskElement(task));
                });
            } else {
                upcomingTasksList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-calendar-check"></i>
                        <h3>No upcoming tasks!</h3>
                        <p>Add tasks for the next 7 days to stay organized.</p>
                    </div>
                `;
            }
            // Process imported plans
function processPlans() {
    const plansText = plansTextarea.value.trim();
    if (!plansText) {
        showNotification('Please paste your study plans in the specified format', 'error');
        return;
    }
    
    // Parse the plans
    const lines = plansText.split('\n');
    const newTasks = [];
    
    lines.forEach(line => {
        if (line.startsWith('|')) {
            const parts = line.split('|').map(part => part.trim());
            if (parts.length >= 6) {
                // Parse date (format: DD-MM-YYYY)
                const dateParts = parts[1].split('-');
                if (dateParts.length === 3) {
                    const dateStr = `${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`;
                    
                    // Create tasks for each subject that's not "-"
                    for (let i = 3; i <= 5; i++) {
                        if (parts[i] && parts[i] !== '-') {
                            newTasks.push({
                                id: Date.now() + Math.random(),
                                name: parts[i],
                                date: dateStr,
                                priority: 'medium',
                                subject: '',
                                duration: 60,
                                notes: '',
                                completed: false,
                                createdAt: new Date().toISOString()
                            });
                        }
                    }
                }
            }
        }
    });
    
    if (newTasks.length > 0) {
        tasks = [...tasks, ...newTasks];
        saveTasks();
        renderTasks();
        updateStats();
        showNotification(`Imported ${newTasks.length} tasks successfully!`, 'success');
        document.getElementById('importPage').style.display = 'none';
        document.getElementById('dashboardPage').style.display = 'block';
    } else {
        showNotification('No valid tasks found in the imported text', 'warning');
    }
}
            
            // Render backlog tasks
            if (backlogTasks.length > 0) {
                backlogTasks.forEach(task => {
                    backlogList.appendChild(createTaskElement(task));
                });
            } else {
                backlogList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-thumbs-up"></i>
                        <h3>No backlog tasks!</h3>
                        <p>Great job keeping up with your tasks!</p>
                    </div>
                `;
            }
            
            // Render completed tasks
            if (completedTasks.length > 0) {
                completedTasks.forEach(task => {
                    completedTasksList.appendChild(createTaskElement(task));
                });
            } else {
                completedTasksList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-history"></i>
                        <h3>No completed tasks yet!</h3>
                        <p>Complete some tasks to see them here.</p>
                    </div>
                `;
            }
            
            // Render all tasks
            if (tasks.length > 0) {
                tasks.forEach(task => {
                    allTasksList.appendChild(createTaskElement(task));
                });
            } else {
                allTasksList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-tasks"></i>
                        <h3>No tasks created yet!</h3>
                        <p>Add your first task to get started.</p>
                    </div>
                `;
            }
            
            // Update today's progress
            updateTodayProgress(todayTasks);
        }
        
        // Create task element
        function createTaskElement(task) {
            const li = document.createElement('li');
            li.className = `task-item ${task.completed ? 'completed' : ''} ${isBacklog(task.date) ? 'backlog' : ''} ${task.priority}-priority`;
            li.dataset.id = task.id;
            
            const taskContent = document.createElement('div');
            taskContent.className = 'task-content';
            
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.className = 'task-checkbox';
            checkbox.checked = task.completed;
            checkbox.addEventListener('change', () => toggleTaskComplete(task.id));
            
            const taskName = document.createElement('span');
            taskName.className = `task-name ${task.completed ? 'completed' : ''}`;
            taskName.textContent = task.name;
            
            const taskPriority = document.createElement('span');
            taskPriority.className = `task-priority ${task.priority}`;
            taskPriority.textContent = task.priority.charAt(0).toUpperCase() + task.priority.slice(1);
            
            const taskDate = document.createElement('span');
            taskDate.className = 'task-date';
            taskDate.textContent = formatDisplayDate(task.date);
            
            taskContent.appendChild(checkbox);
            taskContent.appendChild(taskName);
            taskContent.appendChild(taskPriority);
            taskContent.appendChild(taskDate);
            
            const taskActions = document.createElement('div');
            taskActions.className = 'task-actions';
            
            if (!task.completed) {
                const editBtn = document.createElement('button');
                editBtn.className = 'btn btn-outline btn-sm';
                editBtn.innerHTML = '<i class="fas fa-edit"></i>';
                editBtn.title = 'Edit Task';
                editBtn.addEventListener('click', () => editTask(task.id));
                taskActions.appendChild(editBtn);
            }
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'btn btn-outline btn-sm';
            deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
            deleteBtn.title = 'Delete Task';
            deleteBtn.addEventListener('click', () => deleteTask(task.id));
            taskActions.appendChild(deleteBtn);
            
            li.appendChild(taskContent);
            li.appendChild(taskActions);
            
            return li;
        }
        
        // Format date for display
        function formatDisplayDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
        }
        
        // Check if task is in backlog
        function isBacklog(dateString) {
            const taskDate = new Date(dateString);
            return taskDate < today && taskDate.toDateString() !== today.toDateString();
        }
        
        // Update today's progress
        function updateTodayProgress(todayTasks) {
            const totalTasks = todayTasks.length;
            const completedTasks = todayTasks.filter(task => task.completed).length;
            const progressPercentage = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 100;
            
            todayProgressElement.style.width = `${progressPercentage}%`;
            todayProgressPercentage.textContent = `${progressPercentage}%`;
        }
        
        // Update stats
        function updateStats() {
            const totalTasks = tasks.length;
            const completedTasks = tasks.filter(task => task.completed).length;
            const backlogTasks = tasks.filter(task => isBacklog(task.date) && !task.completed).length;
            const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            
            // Calculate streak (simplified for this demo)
            const streak = calculateStreak();
            
            currentStreakElement.innerHTML = `<i class="fas fa-fire"></i> ${streak}`;
            tasksCompletedElement.textContent = completedTasks;
            backlogTasksElement.textContent = backlogTasks;
            completionRateElement.textContent = `${completionRate}%`;
            
            // Update holidays badge
            holidaysBadge.textContent = holidays.length > 0 ? holidays.length : '';
        }
        
        // Calculate streak (simplified version)
        function calculateStreak() {
            // Sort completed tasks by date
            const completedTasks = tasks.filter(task => task.completed)
                                      .sort((a, b) => new Date(a.date) - new Date(b.date));
            
            if (completedTasks.length === 0) return 0;
            
            let streak = 0;
            let currentDate = new Date(today);
            
            // Check if today is completed
            const todayCompleted = tasks.some(task => 
                task.date === todayFormatted && task.completed
            );
            
            if (todayCompleted) {
                streak = 1;
                currentDate.setDate(currentDate.getDate() - 1);
            }
            
            // Check consecutive days before today
            while (true) {
                const dateStr = formatDate(currentDate);
                const dayCompleted = completedTasks.some(task => task.date === dateStr);
                
                if (dayCompleted) {
                    streak++;
                    currentDate.setDate(currentDate.getDate() - 1);
                } else {
                    break;
                }
            }
            
            return streak;
        }
        
        // Toggle task complete status
        function toggleTaskComplete(taskId) {
            tasks = tasks.map(task => {
                if (task.id === taskId) {
                    return { ...task, completed: !task.completed };
                }
                return task;
            });
            
            saveTasks();
            renderTasks();
            updateStats();
            
            // Show notification
            const task = tasks.find(t => t.id === taskId);
            if (task.completed) {
                showNotification(`Task "${task.name}" completed!`, 'success');
                createConfetti();
            }
        }
        
        // Add new task
        function addTask() {
            const name = taskNameInput.value.trim();
            const date = taskDateInput.value;
            const priority = taskPriorityInput.value;
            const subject = taskSubjectInput.value.trim();
            const duration = parseInt(taskDurationInput.value) || 30;
            const notes = taskNotesInput.value.trim();
            
            if (!name) {
                showNotification('Please enter a task name', 'error');
                return;
            }
            
            const newTask = {
                id: Date.now(),
                name,
                date,
                priority,
                subject,
                duration,
                notes,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            tasks.push(newTask);
            saveTasks();
            renderTasks();
            updateStats();
            
            // Reset form
            taskNameInput.value = '';
            taskDateInput.value = todayFormatted;
            taskPriorityInput.value = 'medium';
            taskSubjectInput.value = '';
            taskDurationInput.value = '30';
            taskNotesInput.value = '';
            
            // Close modal
            document.getElementById('addTaskModal').style.display = 'none';
            
            // Show notification
            showNotification('Task added successfully!', 'success');
        }
        
        // Edit task
        function editTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;
            
            // Fill the form with task data
            taskNameInput.value = task.name;
            taskDateInput.value = task.date;
            taskPriorityInput.value = task.priority;
            taskSubjectInput.value = task.subject || '';
            taskDurationInput.value = task.duration || 30;
            taskNotesInput.value = task.notes || '';
            
            // Store the task ID in the form
            document.getElementById('addTaskModal').dataset.editingId = taskId;
            
            // Change modal title
            document.querySelector('#addTaskModal .modal-title').textContent = 'Edit Task';
            
            // Show modal
            document.getElementById('addTaskModal').style.display = 'flex';
            
            // Focus on the name field
            taskNameInput.focus();
        }
        
        // Save edited task
        function saveEditedTask() {
            const taskId = parseInt(document.getElementById('addTaskModal').dataset.editingId);
            const name = taskNameInput.value.trim();
            const date = taskDateInput.value;
            const priority = taskPriorityInput.value;
            const subject = taskSubjectInput.value.trim();
            const duration = parseInt(taskDurationInput.value) || 30;
            const notes = taskNotesInput.value.trim();
            
            if (!name) {
                showNotification('Please enter a task name', 'error');
                return;
            }
            
            tasks = tasks.map(task => {
                if (task.id === taskId) {
                    return { 
                        ...task,
                        name,
                        date,
                        priority,
                        subject,
                        duration,
                        notes
                    };
                }
                return task;
            });
            
            saveTasks();
            renderTasks();
            updateStats();
            
            // Reset form
            document.getElementById('addTaskModal').dataset.editingId = '';
            taskNameInput.value = '';
            taskDateInput.value = todayFormatted;
            taskPriorityInput.value = 'medium';
            taskSubjectInput.value = '';
            taskDurationInput.value = '30';
            taskNotesInput.value = '';
            
            // Close modal
            document.getElementById('addTaskModal').style.display = 'none';
            
            // Show notification
            showNotification('Task updated successfully!', 'success');
        }
        
        // Delete task
        function deleteTask(taskId) {
            showConfirmModal(
                'Delete Task',
                'Are you sure you want to delete this task? This action cannot be undone.',
                () => {
                    tasks = tasks.filter(task => task.id !== taskId);
                    saveTasks();
                    renderTasks();
                    updateStats();
                    showNotification('Task deleted successfully!', 'success');
                }
            );
        }
        
        // Complete all today's tasks
        function completeAllTodayTasks() {
            showConfirmModal(
                'Complete All Tasks',
                'Are you sure you want to mark all today\'s tasks as completed?',
                () => {
                    tasks = tasks.map(task => {
                        if (task.date === todayFormatted && !task.completed) {
                            return { ...task, completed: true };
                        }
                        return task;
                    });
                    
                    saveTasks();
                    renderTasks();
                    updateStats();
                    showNotification('All tasks completed!', 'success');
                    createConfetti();
                }
            );
        }
        
        // Take leave (mark today as holiday)
        function takeLeave() {
            const holidayName = "Personal Leave";
            
            // Check if already exists
            const exists = holidays.some(h => h.date === todayFormatted);
            if (exists) {
                showNotification('You already have a holiday/leave for today', 'warning');
                return;
            }
            
            const newHoliday = {
                id: Date.now(),
                name: holidayName,
                date: todayFormatted,
                type: 'leave',
                description: 'Personal study leave',
                createdAt: new Date().toISOString()
            };
            
            holidays.push(newHoliday);
            saveHolidays();
            renderHolidays();
            renderCalendar();
            
            showNotification('Leave marked for today. Take some rest!', 'success');
        }
        
        // Clear backlog
        function clearBacklog() {
            showConfirmModal(
                'Clear Backlog',
                'Are you sure you want to clear all backlog tasks? This action cannot be undone.',
                () => {
                    tasks = tasks.filter(task => !isBacklog(task.date));
                    saveTasks();
                    renderTasks();
                    updateStats();
                    showNotification('Backlog cleared successfully!', 'success');
                }
            );
        }
        
        // Reschedule backlog tasks
        function rescheduleBacklog() {
            showConfirmModal(
                'Reschedule Backlog',
                'Reschedule all backlog tasks to today?',
                () => {
                    tasks = tasks.map(task => {
                        if (isBacklog(task.date)) {
                            return { ...task, date: todayFormatted };
                        }
                        return task;
                    });
                    
                    saveTasks();
                    renderTasks();
                    updateStats();
                    showNotification('Backlog tasks rescheduled to today!', 'success');
                }
            );
        }
        
        // Clear history
        function clearHistory() {
            showConfirmModal(
                'Clear History',
                'Are you sure you want to clear your task history? This action cannot be undone.',
                () => {
                    tasks = tasks.filter(task => !task.completed);
                    saveTasks();
                    renderTasks();
                    updateStats();
                    showNotification('Task history cleared!', 'success');
                }
            );
        }
        
        // Render holidays
        function renderHolidays() {
            holidaysPageList.innerHTML = '';
            
            if (holidays.length > 0) {
                // Sort by date (newest first)
                const sortedHolidays = [...holidays].sort((a, b) => new Date(b.date) - new Date(a.date));
                
                sortedHolidays.forEach(holiday => {
                    const holidayItem = document.createElement('div');
                    holidayItem.className = `holiday-item ${holiday.type === 'leave' ? 'leave' : ''}`;
                    
                    const holidayInfo = document.createElement('div');
                    
                    const holidayName = document.createElement('div');
                    holidayName.className = 'holiday-name';
                    holidayName.textContent = holiday.name;
                    
                    const holidayDate = document.createElement('div');
                    holidayDate.className = 'holiday-date';
                    holidayDate.textContent = formatDisplayDate(holiday.date) + (holiday.type === 'leave' ? ' (Leave)' : '');
                    
                    holidayInfo.appendChild(holidayName);
                    holidayInfo.appendChild(holidayDate);
                    
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'btn btn-outline btn-sm';
                    deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                    deleteBtn.title = 'Delete Holiday';
                    deleteBtn.addEventListener('click', () => deleteHoliday(holiday.id));
                    
                    holidayItem.appendChild(holidayInfo);
                    holidayItem.appendChild(deleteBtn);
                    
                    holidaysPageList.appendChild(holidayItem);
                });
            } else {
                holidaysPageList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-umbrella-beach"></i>
                        <h3>No holidays or leaves added yet!</h3>
                        <p>Add holidays or personal leaves to track your breaks.</p>
                    </div>
                `;
            }
        }
        
        // Add holiday
        function addHoliday() {
            const name = holidayNameInput.value.trim();
            const date = holidayDateInput.value;
            const type = holidayTypeInput.value;
            const description = holidayDescriptionInput.value.trim();
            
            if (!name) {
                showNotification('Please enter a name for the holiday/leave', 'error');
                return;
            }
            
            // Check if already exists
            const exists = holidays.some(h => h.date === date);
            if (exists) {
                showNotification('You already have a holiday/leave for this date', 'warning');
                return;
            }
            
            const newHoliday = {
                id: Date.now(),
                name,
                date,
                type,
                description,
                createdAt: new Date().toISOString()
            };
            
            holidays.push(newHoliday);
            saveHolidays();
            renderHolidays();
            renderCalendar();
            
            // Reset form
            holidayNameInput.value = '';
            holidayDateInput.value = todayFormatted;
            holidayTypeInput.value = 'holiday';
            holidayDescriptionInput.value = '';
            
            // Close modal
            document.getElementById('addHolidayModal').style.display = 'none';
            
            // Show notification
            showNotification(`${type === 'holiday' ? 'Holiday' : 'Leave'} added successfully!`, 'success');
        }
        
        // Delete holiday
        function deleteHoliday(holidayId) {
            showConfirmModal(
                'Delete Holiday/Leave',
                'Are you sure you want to delete this holiday/leave?',
                () => {
                    holidays = holidays.filter(holiday => holiday.id !== holidayId);
                    saveHolidays();
                    renderHolidays();
                    renderCalendar();
                    showNotification('Holiday/leave deleted successfully!', 'success');
                }
            );
        }
        
        // Render calendar
        function renderCalendar() {
            calendarMonth.innerHTML = '';
            
            // Create month header
            const monthHeader = document.createElement('div');
            monthHeader.className = 'card-header';
            monthHeader.innerHTML = `
                <div class="card-title">
                    <i class="far fa-calendar-alt"></i>
                    ${today.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}
                </div>
                <div class="card-actions">
                    <button class="btn btn-outline btn-sm" id="prevMonthBtn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="btn btn-outline btn-sm" id="nextMonthBtn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            `;
            calendarMonth.appendChild(monthHeader);
            
            // Create calendar grid
            const calendarGrid = document.createElement('div');
            calendarGrid.className = 'calendar';
            
            // Add day headers
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            days.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'calendar-header';
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });
            
            // Get first day of month and total days
            const firstDay = new Date(today.getFullYear(), today.getMonth(), 1).getDay();
            const daysInMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0).getDate();
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < firstDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.className = 'calendar-day';
                calendarGrid.appendChild(emptyCell);
            }
            
            // Add cells for each day of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = formatDate(new Date(today.getFullYear(), today.getMonth(), day));
                const dayCell = document.createElement('div');
                dayCell.className = 'calendar-day';
                
                const dayNumber = document.createElement('div');
                dayNumber.className = 'calendar-day-number';
                dayNumber.textContent = day;
                dayCell.appendChild(dayNumber);
                
                // Check if it's today
                if (dateStr === todayFormatted) {
                    dayCell.classList.add('today');
                }
                
                // Check if it's a holiday
                const holiday = holidays.find(h => h.date === dateStr);
                if (holiday) {
                    dayCell.classList.add(holiday.type === 'leave' ? 'leave' : 'holiday');
                }
                
                // Check for tasks
                const dayTasks = tasks.filter(task => task.date === dateStr);
                if (dayTasks.length > 0) {
                    const eventsDiv = document.createElement('div');
                    eventsDiv.className = 'calendar-day-events';
                    
                    // Add event indicators (max 3)
                    for (let i = 0; i < Math.min(dayTasks.length, 3); i++) {
                        const eventDot = document.createElement('div');
                        eventDot.className = 'calendar-day-event';
                        eventsDiv.appendChild(eventDot);
                    }
                    
                    dayCell.appendChild(eventsDiv);
                    
                    if (dayTasks.every(task => task.completed)) {
                        dayCell.classList.add('completed');
                    } else if (dayTasks.some(task => !task.completed && new Date(task.date) < today)) {
                        dayCell.classList.add('missed');
                    }
                }
                
                calendarGrid.appendChild(dayCell);
            }
            
            calendarMonth.appendChild(calendarGrid);
            
            // Add event listeners for navigation buttons
            document.getElementById('prevMonthBtn')?.addEventListener('click', () => {
                today.setMonth(today.getMonth() - 1);
                renderCalendar();
            });
                // Process imported plans
processPlansBtn.addEventListener('click', processPlans);

// Cancel import
cancelImportBtn.addEventListener('click', () => {
    document.getElementById('importPage').style.display = 'none';
    document.getElementById('dashboardPage').style.display = 'block';
});
            
            document.getElementById('nextMonthBtn')?.addEventListener('click', () => {
                today.setMonth(today.getMonth() + 1);
                renderCalendar();
            });
        }
        
        // Process imported plans
        function processPlans() {
            const plansText = plansTextarea.value.trim();
            if (!plansText) {
                showNotification('Please paste your study plans in the specified format', 'error');
                return;
            }
            
            // Parse the plans (simplified parsing for this demo)
            const lines = plansText.split('\n');
            const newTasks = [];
            
            lines.forEach(line => {
                if (line.startsWith('|')) {
                    const parts = line.split('|').map(part => part.trim());
                    if (parts.length >= 6) {
                        // Parse date (format: DD-MM-YYYY)
                        const dateParts = parts[1].split('-');
                        if (dateParts.length === 3) {
                            const dateStr = `${dateParts[2]}-${dateParts[1]}-${dateParts[0]}`;
                            
                            // Create tasks for each subject that's not "-"
                            for (let i = 3; i <= 5; i++) {
                                if (parts[i] && parts[i] !== '-') {
                                    newTasks.push({
                                        id: Date.now() + Math.random(),
                                        name: parts[i],
                                        date: dateStr,
                                        priority: 'medium',
                                        subject: '',
                                        duration: 60,
                                        notes: '',
                                        completed: false,
                                        createdAt: new Date().toISOString()
                                    });
                                }
                            }
                        }
                    }
                }
            });
            
            if (newTasks.length > 0) {
                tasks = [...tasks, ...newTasks];
                saveTasks();
                renderTasks();
                update
                            showNotification(`Imported ${newTasks.length} tasks successfully!`, 'success');
                document.getElementById('importPage').style.display = 'none';
                document.getElementById('dashboardPage').style.display = 'block';
            } else {
                showNotification('No valid tasks found in the imported text', 'warning');
            }
        }

        // Render resources
        function renderResources() {
            resourcesList.innerHTML = '';
            
            if (resources.length > 0) {
                resources.forEach(resource => {
                    const resourceCard = document.createElement('div');
                    resourceCard.className = 'resource-card';
                    
                    const resourceIcon = document.createElement('div');
                    resourceIcon.className = 'resource-icon';
                    
                    // Set icon based on type
                    let iconClass;
                    switch(resource.type) {
                        case 'book': iconClass = 'fas fa-book'; break;
                        case 'video': iconClass = 'fas fa-video'; break;
                        case 'website': iconClass = 'fas fa-globe'; break;
                        case 'document': iconClass = 'fas fa-file-alt'; break;
                        default: iconClass = 'fas fa-link';
                    }
                    resourceIcon.innerHTML = `<i class="${iconClass}"></i>`;
                    
                    const resourceInfo = document.createElement('div');
                    resourceInfo.className = 'resource-info';
                    
                    const resourceTitle = document.createElement('div');
                    resourceTitle.className = 'resource-title';
                    resourceTitle.textContent = resource.title;
                    
                    const resourceLink = document.createElement('div');
                    resourceLink.className = 'resource-link';
                    resourceLink.textContent = resource.url;
                    
                    resourceInfo.appendChild(resourceTitle);
                    resourceInfo.appendChild(resourceLink);
                    
                    const resourceActions = document.createElement('div');
                    resourceActions.className = 'resource-actions';
                    
                    const viewBtn = document.createElement('button');
                    viewBtn.className = 'btn btn-outline btn-sm';
                    viewBtn.innerHTML = '<i class="fas fa-eye"></i>';
                    viewBtn.title = 'View Resource';
                    viewBtn.addEventListener('click', () => window.open(resource.url, '_blank'));
                    
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'btn btn-outline btn-sm';
                    deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                    deleteBtn.title = 'Delete Resource';
                    deleteBtn.addEventListener('click', () => deleteResource(resource.id));
                    
                    resourceActions.appendChild(viewBtn);
                    resourceActions.appendChild(deleteBtn);
                    
                    resourceCard.appendChild(resourceIcon);
                    resourceCard.appendChild(resourceInfo);
                    resourceCard.appendChild(resourceActions);
                    
                    resourcesList.appendChild(resourceCard);
                });
            } else {
                resourcesList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-book"></i>
                        <h3>No resources added yet!</h3>
                        <p>Add your study resources to keep them organized in one place.</p>
                    </div>
                `;
            }
        }

        // Add resource
        function addResource() {
            const title = resourceTitleInput.value.trim();
            const type = resourceTypeInput.value;
            const url = resourceUrlInput.value.trim();
            const subject = resourceSubjectInput.value.trim();
            const description = resourceDescriptionInput.value.trim();
            
            if (!title || !url) {
                showNotification('Please enter title and URL for the resource', 'error');
                return;
            }
            
            // Validate URL
            try {
                new URL(url);
            } catch (e) {
                showNotification('Please enter a valid URL', 'error');
                return;
            }
            
            const newResource = {
                id: Date.now(),
                title,
                type,
                url,
                subject,
                description,
                createdAt: new Date().toISOString()
            };
            
            resources.push(newResource);
            saveResources();
            renderResources();
            
            // Reset form
            resourceTitleInput.value = '';
            resourceTypeInput.value = 'book';
            resourceUrlInput.value = '';
            resourceSubjectInput.value = '';
            resourceDescriptionInput.value = '';
            
            // Close modal
            document.getElementById('addResourceModal').style.display = 'none';
            
            // Show notification
            showNotification('Resource added successfully!', 'success');
        }

        // Delete resource
        function deleteResource(resourceId) {
            showConfirmModal(
                'Delete Resource',
                'Are you sure you want to delete this resource?',
                () => {
                    resources = resources.filter(resource => resource.id !== resourceId);
                    saveResources();
                    renderResources();
                    showNotification('Resource deleted successfully!', 'success');
                }
            );
        }

        // Render notes
        function renderNotes() {
            notesList.innerHTML = '';
            
            if (notes.length > 0) {
                // Sort notes by date (newest first)
                const sortedNotes = [...notes].sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                
                sortedNotes.forEach(note => {
                    const noteCard = document.createElement('div');
                    noteCard.className = 'note-card';
                    noteCard.dataset.id = note.id;
                    
                    const noteTitle = document.createElement('div');
                    noteTitle.className = 'note-title';
                    noteTitle.textContent = note.title;
                    
                    const noteContent = document.createElement('div');
                    noteContent.className = 'note-content';
                    noteContent.textContent = note.content.length > 150 ? note.content.substring(0, 150) + '...' : note.content;
                    
                    const noteDate = document.createElement('div');
                    noteDate.className = 'note-date';
                    noteDate.textContent = new Date(note.createdAt).toLocaleDateString();
                    
                    noteCard.appendChild(noteTitle);
                    noteCard.appendChild(noteContent);
                    noteCard.appendChild(noteDate);
                    
                    noteCard.addEventListener('click', () => viewNote(note.id));
                    
                    notesList.appendChild(noteCard);
                });
            } else {
                notesList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-sticky-note"></i>
                        <h3>No notes created yet!</h3>
                        <p>Add your study notes to keep them organized.</p>
                    </div>
                `;
            }
        }

        // Add note
        function addNote() {
            const title = noteTitleInput.value.trim();
            const subject = noteSubjectInput.value.trim();
            const content = noteContentInput.value.trim();
            
            if (!title || !content) {
                showNotification('Please enter title and content for the note', 'error');
                return;
            }
            
            if (currentEditingNoteId) {
                // Update existing note
                notes = notes.map(note => {
                    if (note.id === currentEditingNoteId) {
                        return {
                            ...note,
                            title,
                            subject,
                            content,
                            updatedAt: new Date().toISOString()
                        };
                    }
                    return note;
                });
                
                showNotification('Note updated successfully!', 'success');
                currentEditingNoteId = null;
            } else {
                // Add new note
                const newNote = {
                    id: Date.now(),
                    title,
                    subject,
                    content,
                    createdAt: new Date().toISOString()
                };
                
                notes.push(newNote);
                showNotification('Note added successfully!', 'success');
            }
            
            saveNotes();
            renderNotes();
            
            // Reset form
            noteTitleInput.value = '';
            noteSubjectInput.value = '';
            noteContentInput.value = '';
            
            // Close modal
            document.getElementById('addNoteModal').style.display = 'none';
            document.getElementById('viewNoteModal').style.display = 'none';
        }

        // View note
        function viewNote(noteId) {
            const note = notes.find(n => n.id === noteId);
            if (!note) return;
            
            viewNoteTitle.textContent = note.title;
            viewNoteSubject.textContent = note.subject || 'No subject';
            viewNoteDate.textContent = new Date(note.createdAt).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            viewNoteContent.textContent = note.content;
            
            // Set current editing note ID
            document.getElementById('viewNoteModal').dataset.noteId = noteId;
            
            // Show modal
            document.getElementById('viewNoteModal').style.display = 'flex';
        }

        // Edit note
        function editNote() {
            const noteId = parseInt(document.getElementById('viewNoteModal').dataset.noteId);
            const note = notes.find(n => n.id === noteId);
            if (!note) return;
            
            // Fill the form with note data
            noteTitleInput.value = note.title;
            noteSubjectInput.value = note.subject || '';
            noteContentInput.value = note.content;
            
            // Set current editing note ID
            currentEditingNoteId = noteId;
            
            // Close view modal and open edit modal
            document.getElementById('viewNoteModal').style.display = 'none';
            document.getElementById('addNoteModal').style.display = 'flex';
            
            // Change modal title
            document.querySelector('#addNoteModal .modal-title').textContent = 'Edit Note';
            
            // Focus on the title field
            noteTitleInput.focus();
        }

        // Delete note
        function deleteNote() {
            const noteId = parseInt(document.getElementById('viewNoteModal').dataset.noteId);
            
            showConfirmModal(
                'Delete Note',
                'Are you sure you want to delete this note? This action cannot be undone.',
                () => {
                    notes = notes.filter(note => note.id !== noteId);
                    saveNotes();
                    renderNotes();
                    document.getElementById('viewNoteModal').style.display = 'none';
                    showNotification('Note deleted successfully!', 'success');
                }
            );
        }

        // Timer functions
        function startTimer() {
            if (!timerRunning) {
                timerRunning = true;
                timerInterval = setInterval(updateTimer, 1000);
                startTimerBtn.disabled = true;
                pauseTimerBtn.disabled = false;
            }
        }

        function pauseTimer() {
            if (timerRunning) {
                timerRunning = false;
                clearInterval(timerInterval);
                startTimerBtn.disabled = false;
                pauseTimerBtn.disabled = true;
            }
        }

        function resetTimer() {
            pauseTimer();
            switch(timerMode) {
                case 'pomodoro':
                    timerSeconds = profile.pomodoroDuration * 60;
                    break;
                case 'shortBreak':
                    timerSeconds = profile.shortBreakDuration * 60;
                    break;
                case 'longBreak':
                    timerSeconds = profile.longBreakDuration * 60;
                    break;
            }
            updateTimerDisplay();
        }

        function updateTimer() {
            timerSeconds--;
            updateTimerDisplay();
            
            if (timerSeconds <= 0) {
                pauseTimer();
                
                // Play sound
                const audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3');
                audio.play();
                
                // Show notification
                let message;
                if (timerMode === 'pomodoro') {
                    pomodoroCount++;
                    message = 'Pomodoro completed! Time for a break.';
                    
                    // Add to session history
                    const newSession = {
                        id: Date.now(),
                        type: 'pomodoro',
                        duration: profile.pomodoroDuration,
                        completedAt: new Date().toISOString()
                    };
                    sessions.push(newSession);
                    saveSessions();
                    renderSessionHistory();
                    
                    // Every 4 pomodoros, suggest a long break
                    if (pomodoroCount % 4 === 0) {
                        message += ' Take a long break!';
                        showConfirmModal(
                            'Pomodoro Completed',
                            'You\'ve completed 4 pomodoros! Would you like to take a long break?',
                            () => {
                                switchTimerMode('longBreak');
                                startTimer();
                            }
                        );
                    } else {
                        showConfirmModal(
                            'Pomodoro Completed',
                            'Would you like to take a short break?',
                            () => {
                                switchTimerMode('shortBreak');
                                startTimer();
                            }
                        );
                    }
                } else {
                    message = timerMode === 'shortBreak' ? 'Short break completed!' : 'Long break completed!';
                    showNotification(message, 'success');
                    
                    // Automatically switch back to pomodoro
                    switchTimerMode('pomodoro');
                }
                
                showNotification(message, 'success');
            }
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timerSeconds / 60);
            const seconds = timerSeconds % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function switchTimerMode(mode) {
            timerMode = mode;
            
            // Update active tab
            pomodoroTabs.forEach(tab => {
                if (tab.dataset.pomodoro === mode) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Reset timer for the new mode
            resetTimer();
        }

        function renderSessionHistory() {
            sessionHistory.innerHTML = '';
            
            if (sessions.length > 0) {
                // Sort sessions by date (newest first)
                const sortedSessions = [...sessions].sort((a, b) => new Date(b.completedAt) - new Date(a.completedAt));
                
                sortedSessions.slice(0, 10).forEach(session => { // Show last 10 sessions
                    const sessionItem = document.createElement('div');
                    sessionItem.className = 'session-item';
                    
                    const sessionInfo = document.createElement('div');
                    
                    const sessionType = document.createElement('div');
                    sessionType.className = 'session-subject';
                    sessionType.textContent = session.type === 'pomodoro' ? 'Pomodoro Session' : `${session.type === 'shortBreak' ? 'Short' : 'Long'} Break`;
                    
                    const sessionDuration = document.createElement('div');
                    sessionDuration.className = 'session-duration';
                    sessionDuration.textContent = `${session.duration} minutes - ${new Date(session.completedAt).toLocaleString()}`;
                    
                    sessionInfo.appendChild(sessionType);
                    sessionInfo.appendChild(sessionDuration);
                    
                    const deleteBtn = document.createElement('button');
                    deleteBtn.className = 'btn btn-outline btn-sm';
                    deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                    deleteBtn.title = 'Delete Session';
                    deleteBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        deleteSession(session.id);
                    });
                    
                    sessionItem.appendChild(sessionInfo);
                    sessionItem.appendChild(deleteBtn);
                    
                    sessionHistory.appendChild(sessionItem);
                });
            } else {
                sessionHistory.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-history"></i>
                        <h3>No session history yet!</h3>
                        <p>Complete pomodoro sessions to see them here.</p>
                    </div>
                `;
            }
        }

        function deleteSession(sessionId) {
            showConfirmModal(
                'Delete Session',
                'Are you sure you want to delete this session record?',
                () => {
                    sessions = sessions.filter(session => session.id !== sessionId);
                    saveSessions();
                    renderSessionHistory();
                    showNotification('Session deleted successfully!', 'success');
                }
            );
        }

        // Save data to localStorage
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        function saveHolidays() {
            localStorage.setItem('holidays', JSON.stringify(holidays));
        }

        function saveResources() {
            localStorage.setItem('resources', JSON.stringify(resources));
        }

        function saveNotes() {
            localStorage.setItem('notes', JSON.stringify(notes));
        }

        function saveSessions() {
            localStorage.setItem('sessions', JSON.stringify(sessions));
        }

        function saveProfile() {
            localStorage.setItem('profile', JSON.stringify(profile));
        }

        // Export data
        function exportData() {
            const data = {
                tasks,
                holidays,
                resources,
                notes,
                sessions,
                profile,
                exportedAt: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `study-tracker-data-${formatDate(new Date())}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Data exported successfully!', 'success');
        }

        // Import data
        function importData() {
            const fileInput = document.getElementById('dataFileInput');
            if (!fileInput.files.length) {
                showNotification('Please select a file to import', 'error');
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    showConfirmModal(
                        'Import Data',
                        'This will overwrite your current data. Are you sure?',
                        () => {
                            if (importTasksCheck.checked) tasks = data.tasks || [];
                            if (importHolidaysCheck.checked) holidays = data.holidays || [];
                            if (importResourcesCheck.checked) resources = data.resources || [];
                            if (importNotesCheck.checked) notes = data.notes || [];
                            
                            // Only import profile if all data is being imported
                            if (importTasksCheck.checked && importHolidaysCheck.checked && 
                                importResourcesCheck.checked && importNotesCheck.checked) {
                                profile = data.profile || profile;
                            }
                            
                            saveTasks();
                            saveHolidays();
                            saveResources();
                            saveNotes();
                            saveProfile();
                            
                            initApp();
                            document.getElementById('importDataModal').style.display = 'none';
                            showNotification('Data imported successfully!', 'success');
                        }
                    );
                } catch (e) {
                    showNotification('Invalid file format. Please import a valid JSON file.', 'error');
                }
            };
            
            reader.readAsText(file);
        }

        // Reset data
        function resetData() {
            showConfirmModal(
                'Reset All Data',
                'This will permanently delete all your data. Are you sure?',
                () => {
                    tasks = [];
                    holidays = [];
                    resources = [];
                    notes = [];
                    sessions = [];
                    profile = {
                        name: "Amit kumar",
                        class: "Class: 11",
                        theme: "light",
                        studyGoal: 4,
                        pomodoroDuration: 25,
                        shortBreakDuration: 5,
                        longBreakDuration: 15
                    };
                    
                    saveTasks();
                    saveHolidays();
                    saveResources();
                    saveNotes();
                    saveSessions();
                    saveProfile();
                    
                    initApp();
                    showNotification('All data has been reset', 'success');
                }
            );
        }

        // Show notification
        function showNotification(message, type = 'success') {
            notification.className = `notification ${type}`;
            notificationMessage.textContent = message;
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Create confetti effect
        function createConfetti() {
            const colors = ['#4361ee', '#3f37c9', '#4895ef', '#4cc9f0', '#f72585', '#7209b7', '#3a0ca3'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                document.body.appendChild(confetti);
                
                // Animation
                const animation = confetti.animate([
                    { transform: `translateY(0) rotate(0)`, opacity: 1 },
                    { transform: `translateY(${window.innerHeight}px) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 3000 + 2000,
                    easing: 'cubic-bezier(0.1, 0.8, 0.3, 1)'
                });
                
                animation.onfinish = () => confetti.remove();
            }
        }

        // Show confirmation modal
        function showConfirmModal(title, message, confirmCallback) {
            confirmModalTitle.textContent = title;
            confirmModalMessage.textContent = message;
            confirmModal.style.display = 'flex';
            
            // Set up confirm button
            confirmActionBtn.onclick = () => {
                confirmCallback();
                confirmModal.style.display = 'none';
            };
        }

        // Toggle theme
        function toggleTheme() {
            if (document.documentElement.getAttribute('data-theme') === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                profile.theme = 'light';
                themeToggle.innerHTML = '<i class="fas fa-moon"></i><span>Dark Mode</span>';
                themeTogglePage.innerHTML = '<i class="fas fa-moon"></i><span>Dark Mode</span>';
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                profile.theme = 'dark';
                themeToggle.innerHTML = '<i class="fas fa-sun"></i><span>Light Mode</span>';
                themeTogglePage.innerHTML = '<i class="fas fa-sun"></i><span>Light Mode</span>';
            }
            
            saveProfile();
        }

        // Toggle sidebar on mobile
        function toggleSidebar() {
            sidebar.classList.toggle('active');
        }

        // Switch page
        function switchPage(pageId) {
            pageContents.forEach(page => {
                page.style.display = 'none';
            });
            
            document.getElementById(pageId).style.display = 'block';
            
            // Update active sidebar link
            sidebarLinks.forEach(link => {
                if (link.dataset.page === pageId.replace('Page', '').toLowerCase()) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
            
            // Close sidebar on mobile
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('active');
            }
        }

        // Switch tab
        function switchTab(tabId) {
            tabContents.forEach(content => {
                if (content.id === tabId + 'Tab') {
                    content.style.display = 'block';
                } else {
                    content.style.display = 'none';
                }
            });
            
            // Update active tab
            tabs.forEach(tab => {
                if (tab.dataset.tab === tabId) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
        }

        // Switch pomodoro tab
        function switchPomodoroTab(tab) {
            pomodoroTabs.forEach(t => {
                if (t.dataset.pomodoro === tab) {
                    t.classList.add('active');
                } else {
                    t.classList.remove('active');
                }
            });
            
            timerMode = tab;
            resetTimer();
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', initApp);

        // Sidebar toggle
        menuToggle.addEventListener('click', toggleSidebar);
        sidebarToggle.addEventListener('click', toggleSidebar);

        // Theme toggle
        themeToggle.addEventListener('click', toggleTheme);
        themeTogglePage.addEventListener('click', toggleTheme);

        // Sidebar navigation
        sidebarLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const pageId = link.dataset.page + 'Page';
                switchPage(pageId);
            });
        });

        // Tabs
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                switchTab(tab.dataset.tab);
            });
        });

        // Pomodoro tabs
        pomodoroTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                switchPomodoroTab(tab.dataset.pomodoro);
            });
        });

        // Task buttons
        completeAllBtn.addEventListener('click', completeAllTodayTasks);
        takeLeaveBtn.addEventListener('click', takeLeave);
        clearBacklogBtn.addEventListener('click', clearBacklog);
        rescheduleBacklogBtn.addEventListener('click', rescheduleBacklog);
        clearHistoryBtn.addEventListener('click', clearHistory);

        // Add task
        addTaskBtn.addEventListener('click', () => {
            document.querySelector('#addTaskModal .modal-title').textContent = 'Add New Task';
            document.getElementById('addTaskModal').dataset.editingId = '';
            taskNameInput.value = '';
            taskDateInput.value = todayFormatted;
            taskPriorityInput.value = 'medium';
            taskSubjectInput.value = '';
            taskDurationInput.value = '30';
            taskNotesInput.value = '';
            document.getElementById('addTaskModal').style.display = 'flex';
            taskNameInput.focus();
        });

        addTaskPageBtn.addEventListener('click', () => {
            document.querySelector('#addTaskModal .modal-title').textContent = 'Add New Task';
            document.getElementById('addTaskModal').dataset.editingId = '';
            taskNameInput.value = '';
            taskDateInput.value = todayFormatted;
            taskPriorityInput.value = 'medium';
            taskSubjectInput.value = '';
            taskDurationInput.value = '30';
            taskNotesInput.value = '';
            document.getElementById('addTaskModal').style.display = 'flex';
            taskNameInput.focus();
        });

        addUpcomingTaskBtn.addEventListener('click', () => {
            document.querySelector('#addTaskModal .modal-title').textContent = 'Add New Task';
            document.getElementById('addTaskModal').dataset.editingId = '';
            taskNameInput.value = '';
            taskDateInput.value = formatDate(new Date(today.getTime() + 24 * 60 * 60 * 1000)); // Tomorrow
            taskPriorityInput.value = 'medium';
            taskSubjectInput.value = '';
            taskDurationInput.value = '30';
            taskNotesInput.value = '';
            document.getElementById('addTaskModal').style.display = 'flex';
            taskNameInput.focus();
        });

        saveTaskBtn.addEventListener('click', () => {
            const editingId = document.getElementById('addTaskModal').dataset.editingId;
            if (editingId) {
                saveEditedTask();
            } else {
                addTask();
            }
        });

        // Add holiday
        addHolidayBtn.addEventListener('click', () => {
            holidayNameInput.value = '';
            holidayDateInput.value = todayFormatted;
            holidayTypeInput.value = 'holiday';
            holidayDescriptionInput.value = '';
            document.getElementById('addHolidayModal').style.display = 'flex';
            holidayNameInput.focus();
        });

        addHolidayPageBtn.addEventListener('click', () => {
            holidayNameInput.value = '';
            holidayDateInput.value = todayFormatted;
            holidayTypeInput.value = 'holiday';
            holidayDescriptionInput.value = '';
            document.getElementById('addHolidayModal').style.display = 'flex';
            holidayNameInput.focus();
        });

        addCalendarHolidayBtn.addEventListener('click', () => {
            holidayNameInput.value = '';
            holidayDateInput.value = todayFormatted;
            holidayTypeInput.value = 'holiday';
            holidayDescriptionInput.value = '';
            document.getElementById('addHolidayModal').style.display = 'flex';
            holidayNameInput.focus();
        });

        saveHolidayBtn.addEventListener('click', addHoliday);

        // Profile
        profileBtn.addEventListener('click', () => {
            document.getElementById('profileModal').style.display = 'flex';
        });

        closeProfileModal.addEventListener('click', () => {
            document.getElementById('profileModal').style.display = 'none';
        });

        cancelProfileBtn.addEventListener('click', () => {
            document.getElementById('profileModal').style.display = 'none';
        });

        saveProfileBtn.addEventListener('click', () => {
            const name = profileNameInput.value.trim();
            const className = profileClassInput.value.trim();
            const studyGoal = parseInt(studyGoalInput.value) || 4;
            
            if (!name) {
                showNotification('Please enter your name', 'error');
                return;
            }
            
            profile.name = name;
            profile.class = className ? `Class: ${className}` : 'Class: 11';
            profile.studyGoal = studyGoal;
            
            // Save pomodoro settings
            profile.pomodoroDuration = parseInt(pomodoroDurationInput.value) || 25;
            profile.shortBreakDuration = parseInt(shortBreakDurationInput.value) || 5;
            profile.longBreakDuration = parseInt(longBreakDurationInput.value) || 15;
            
            saveProfile();
            updateProfileDisplay();
            
            // Reset timer if settings changed
            if (timerMode === 'pomodoro') {
                timerSeconds = profile.pomodoroDuration * 60;
            } else if (timerMode === 'shortBreak') {
                timerSeconds = profile.shortBreakDuration * 60;
            } else {
                timerSeconds = profile.longBreakDuration * 60;
            }
            updateTimerDisplay();
            
            document.getElementById('profileModal').style.display = 'none';
            showNotification('Profile updated successfully!', 'success');
        });

        // Timer controls
        startTimerBtn.addEventListener('click', startTimer);
        pauseTimerBtn.addEventListener('click', pauseTimer);
        resetTimerBtn.addEventListener('click', resetTimer);

        // Add resource
        addResourceBtn.addEventListener('click', () => {
            resourceTitleInput.value = '';
            resourceTypeInput.value = 'book';
            resourceUrlInput.value = '';
            resourceSubjectInput.value = '';
            resourceDescriptionInput.value = '';
            document.getElementById('addResourceModal').style.display = 'flex';
            resourceTitleInput.focus();
        });

        saveResourceBtn.addEventListener('click', addResource);

        // Add note
        addNoteBtn.addEventListener('click', () => {
            currentEditingNoteId = null;
            noteTitleInput.value = '';
            noteSubjectInput.value = '';
            noteContentInput.value = '';
            document.querySelector('#addNoteModal .modal-title').textContent = 'Add Study Note';
            document.getElementById('addNoteModal').style.display = 'flex';
            noteTitleInput.focus();
        });

        saveNoteBtn.addEventListener('click', addNote);

        // View note
        editNoteBtn.addEventListener('click', editNote);
        deleteNoteBtn.addEventListener('click', deleteNote);

        // Close modals
        const closeButtons = document.querySelectorAll('.modal-close');
        closeButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                this.closest('.modal').style.display = 'none';
            });
        });

        // Click outside modal to close
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });

        // Cancel buttons
        cancelTaskBtn.addEventListener('click', () => {
            document.getElementById('addTaskModal').style.display = 'none';
        });

        cancelHolidayBtn.addEventListener('click', () => {
            document.getElementById('addHolidayModal').style.display = 'none';
        });

        cancelResourceBtn.addEventListener('click', () => {
            document.getElementById('addResourceModal').style.display = 'none';
        });

        cancelNoteBtn.addEventListener('click', () => {
            document.getElementById('addNoteModal').style.display = 'none';
        });

        cancelImportBtn.addEventListener('click', () => {
            document.getElementById('importPage').style.display = 'none';
            document.getElementById('dashboardPage').style.display = 'block';
        });

        closeViewNoteModal.addEventListener('click', () => {
            document.getElementById('viewNoteModal').style.display = 'none';
        });

        // Data management
        exportDataBtn.addEventListener('click', exportData);
        importDataBtn.addEventListener('click', () => {
            document.getElementById('importDataModal').style.display = 'flex';
            dataFileInput.value = '';
        });

        resetDataBtn.addEventListener('click', resetData);

        // Process imported plans
        processPlansBtn.addEventListener('click', processPlans);

        // Import data
        cancelImportDataBtn.addEventListener('click', () => {
            document.getElementById('importDataModal').style.display = 'none';
        });

        confirmImportDataBtn.addEventListener('click', importData);

        // Confirm modal
        cancelConfirmBtn.addEventListener('click', () => {
            confirmModal.style.display = 'none';
        });

        closeConfirmModal.addEventListener('click', () => {
            confirmModal.style.display = 'none';
        });

        // Set default tab for calendar
        switchTab('month');

        // Set default pomodoro tab
        switchPomodoroTab('pomodoro');
    // Test data structure
let tests = JSON.parse(localStorage.getItem('tests')) || [];
let syllabus = JSON.parse(localStorage.getItem('syllabus')) || {
    physics: 0,
    chemistry: 0,
    maths: 0,
    updatedAt: null
};

// Initialize tests
function initTests() {
    renderTests();
    renderSyllabus();
    initTestPerformanceChart();
}

// Render tests
function renderTests() {
    const upcomingTestsList = document.getElementById('upcomingTestsList');
    const completedTestsList = document.getElementById('completedTestsList');
    
    upcomingTestsList.innerHTML = '';
    completedTestsList.innerHTML = '';
    
    // Filter tests
    const upcomingTests = tests.filter(test => new Date(test.date) >= today && !test.completed);
    const completedTests = tests.filter(test => test.completed);
    
    // Update badge
    document.getElementById('upcomingTestsBadge').textContent = upcomingTests.length > 0 ? upcomingTests.length : '';
    
    // Render upcoming tests
    if (upcomingTests.length > 0) {
        upcomingTests.forEach(test => {
            upcomingTestsList.appendChild(createTestElement(test));
        });
    } else {
        upcomingTestsList.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-calendar-check"></i>
                <h3>No upcoming tests!</h3>
                <p>Add tests to track your preparation.</p>
            </div>
        `;
    }
    
    // Render completed tests
    if (completedTests.length > 0) {
        completedTests.forEach(test => {
            completedTestsList.appendChild(createTestElement(test));
        });
    } else {
        completedTestsList.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-history"></i>
                <h3>No completed tests yet!</h3>
                <p>Complete some tests to see them here.</p>
            </div>
        `;
    }
}

// Create test element
function createTestElement(test) {
    const li = document.createElement('li');
    li.className = `task-item ${test.completed ? 'completed' : ''}`;
    li.dataset.id = test.id;
    
    const testContent = document.createElement('div');
    testContent.className = 'task-content';
    
    const testName = document.createElement('span');
    testName.className = 'task-name';
    testName.textContent = test.name;
    
    const testDate = document.createElement('span');
    testDate.className = 'task-date';
    testDate.textContent = formatDisplayDate(test.date);
    
    testContent.appendChild(testName);
    testContent.appendChild(testDate);
    
    const testActions = document.createElement('div');
    testActions.className = 'task-actions';
    
    if (!test.completed) {
        // Submit score button for tests that are today or in the past
        if (new Date(test.date) <= today) {
            const submitBtn = document.createElement('button');
            submitBtn.className = 'btn btn-success btn-sm';
            submitBtn.innerHTML = '<i class="fas fa-check"></i> Submit Score';
            submitBtn.title = 'Submit Test Score';
            submitBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                prepareSubmitScore(test.id);
            });
            testActions.appendChild(submitBtn);
        }
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn btn-outline btn-sm';
        editBtn.innerHTML = '<i class="fas fa-edit"></i>';
        editBtn.title = 'Edit Test';
        editBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            editTest(test.id);
        });
        testActions.appendChild(editBtn);
    } else {
        // Show score for completed tests
        const scoreBadge = document.createElement('span');
        scoreBadge.className = 'badge badge-primary';
        scoreBadge.textContent = `${test.score?.total || 0}/180 (${test.score?.percentage || 0}%)`;
        testActions.appendChild(scoreBadge);
    }
    
    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'btn btn-outline btn-sm';
    deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
    deleteBtn.title = 'Delete Test';
    deleteBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        deleteTest(test.id);
    });
    testActions.appendChild(deleteBtn);
    
    li.appendChild(testContent);
    li.appendChild(testActions);
    
    return li;
}

// Add new test
function addTest() {
    const name = document.getElementById('testName').value.trim();
    const date = document.getElementById('testDate').value;
    const physics = document.getElementById('testPhysics').checked;
    const chemistry = document.getElementById('testChemistry').checked;
    const maths = document.getElementById('testMaths').checked;
    const notes = document.getElementById('testNotes').value.trim();
    
    if (!name || !date) {
        showNotification('Please enter test name and date', 'error');
        return;
    }
    
    if (!physics && !chemistry && !maths) {
        showNotification('Please select at least one subject', 'error');
        return;
    }
    
    const newTest = {
        id: Date.now(),
        name,
        date,
        subjects: {
            physics,
            chemistry,
            maths
        },
        notes,
        completed: false,
        createdAt: new Date().toISOString()
    };
    
    tests.push(newTest);
    saveTests();
    renderTests();
    
    // Reset form
    document.getElementById('testName').value = '';
    document.getElementById('testDate').value = '';
    document.getElementById('testPhysics').checked = true;
    document.getElementById('testChemistry').checked = true;
    document.getElementById('testMaths').checked = true;
    document.getElementById('testNotes').value = '';
    
    // Close modal
    document.getElementById('addTestModal').style.display = 'none';
    
    showNotification('Test added successfully!', 'success');
}

// Edit test
function editTest(testId) {
    const test = tests.find(t => t.id === testId);
    if (!test) return;
    
    // Fill the form
    document.getElementById('testName').value = test.name;
    document.getElementById('testDate').value = test.date;
    document.getElementById('testPhysics').checked = test.subjects.physics;
    document.getElementById('testChemistry').checked = test.subjects.chemistry;
    document.getElementById('testMaths').checked = test.subjects.maths;
    document.getElementById('testNotes').value = test.notes || '';
    
    // Store test ID in the modal
    document.getElementById('addTestModal').dataset.editingId = testId;
    
    // Change modal title
    document.querySelector('#addTestModal .modal-title').textContent = 'Edit Test';
    
    // Show modal
    document.getElementById('addTestModal').style.display = 'flex';
}

// Save edited test
function saveEditedTest() {
    const testId = parseInt(document.getElementById('addTestModal').dataset.editingId);
    const name = document.getElementById('testName').value.trim();
    const date = document.getElementById('testDate').value;
    const physics = document.getElementById('testPhysics').checked;
    const chemistry = document.getElementById('testChemistry').checked;
    const maths = document.getElementById('testMaths').checked;
    const notes = document.getElementById('testNotes').value.trim();
    
    if (!name || !date) {
        showNotification('Please enter test name and date', 'error');
        return;
    }
    
    if (!physics && !chemistry && !maths) {
        showNotification('Please select at least one subject', 'error');
        return;
    }
    
    tests = tests.map(test => {
        if (test.id === testId) {
            return {
                ...test,
                name,
                date,
                subjects: {
                    physics,
                    chemistry,
                    maths
                },
                notes
            };
        }
        return test;
    });
    
    saveTests();
    renderTests();
    
    // Reset form
    document.getElementById('addTestModal').dataset.editingId = '';
    document.getElementById('testName').value = '';
    document.getElementById('testDate').value = '';
    document.getElementById('testPhysics').checked = true;
    document.getElementById('testChemistry').checked = true;
    document.getElementById('testMaths').checked = true;
    document.getElementById('testNotes').value = '';
    
    // Close modal
    document.getElementById('addTestModal').style.display = 'none';
    
    showNotification('Test updated successfully!', 'success');
}

// Delete test
function deleteTest(testId) {
    showConfirmModal(
        'Delete Test',
        'Are you sure you want to delete this test? This action cannot be undone.',
        () => {
            tests = tests.filter(test => test.id !== testId);
            saveTests();
            renderTests();
            showNotification('Test deleted successfully!', 'success');
        }
    );
}

// Prepare to submit score
function prepareSubmitScore(testId) {
    const test = tests.find(t => t.id === testId);
    if (!test) return;
    
    // Store test ID in the modal
    document.getElementById('submitScoreModal').dataset.testId = testId;
    
    // Reset form
    document.getElementById('physicsScore').value = 0;
    document.getElementById('chemistryScore').value = 0;
    document.getElementById('mathsScore').value = 0;
    document.getElementById('totalScore').value = 0;
    document.getElementById('testPercentage').value = '0%';
    document.getElementById('testRemarks').value = '';
    
    // Set max values based on subjects included
    document.getElementById('physicsScore').disabled = !test.subjects.physics;
    document.getElementById('chemistryScore').disabled = !test.subjects.chemistry;
    document.getElementById('mathsScore').disabled = !test.subjects.maths;
    
    // Show modal
    document.getElementById('submitScoreModal').style.display = 'flex';
}

// Calculate total score
function calculateTestScore() {
    const physics = parseInt(document.getElementById('physicsScore').value) || 0;
    const chemistry = parseInt(document.getElementById('chemistryScore').value) || 0;
    const maths = parseInt(document.getElementById('mathsScore').value) || 0;
    
    const total = physics + chemistry + maths;
    const percentage = Math.round((total / 180) * 100);
    
    document.getElementById('totalScore').value = total;
    document.getElementById('testPercentage').value = `${percentage}%`;
}

// Submit test score
function submitTestScore() {
    const testId = parseInt(document.getElementById('submitScoreModal').dataset.testId);
    const physics = parseInt(document.getElementById('physicsScore').value) || 0;
    const chemistry = parseInt(document.getElementById('chemistryScore').value) || 0;
    const maths = parseInt(document.getElementById('mathsScore').value) || 0;
    const remarks = document.getElementById('testRemarks').value.trim();
    
    const total = physics + chemistry + maths;
    const percentage = Math.round((total / 180) * 100);
    
    tests = tests.map(test => {
        if (test.id === testId) {
            return {
                ...test,
                completed: true,
                score: {
                    physics,
                    chemistry,
                    maths,
                    total,
                    percentage,
                    remarks
                },
                completedAt: new Date().toISOString()
            };
        }
        return test;
    });
    
    saveTests();
    renderTests();
    renderTestPerformanceChart();
    
    // Close modal
    document.getElementById('submitScoreModal').style.display = 'none';
    
    showNotification('Test score submitted successfully!', 'success');
}

// Render syllabus
function renderSyllabus() {
    document.getElementById('physicsSyllabus').value = syllabus.physics || 0;
    document.getElementById('chemistrySyllabus').value = syllabus.chemistry || 0;
    document.getElementById('mathsSyllabus').value = syllabus.maths || 0;
    
    document.getElementById('physicsSyllabusValue').textContent = `${syllabus.physics || 0}%`;
    document.getElementById('chemistrySyllabusValue').textContent = `${syllabus.chemistry || 0}%`;
    document.getElementById('mathsSyllabusValue').textContent = `${syllabus.maths || 0}%`;
}

// Save syllabus
function saveSyllabus() {
    syllabus.physics = parseInt(document.getElementById('physicsSyllabus').value) || 0;
    syllabus.chemistry = parseInt(document.getElementById('chemistrySyllabus').value) || 0;
    syllabus.maths = parseInt(document.getElementById('mathsSyllabus').value) || 0;
    syllabus.updatedAt = new Date().toISOString();
    
    localStorage.setItem('syllabus', JSON.stringify(syllabus));
    showNotification('Syllabus progress saved!', 'success');
}

// Initialize test performance chart
function initTestPerformanceChart() {
    const ctx = document.getElementById('testPerformanceChart').getContext('2d');
    window.testPerformanceChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [],
            datasets: [
                {
                    label: 'Physics',
                    data: [],
                    borderColor: '#4361ee',
                    backgroundColor: 'rgba(67, 97, 238, 0.1)',
                    tension: 0.3,
                    fill: true
                },
                {
                    label: 'Chemistry',
                    data: [],
                    borderColor: '#4cc9f0',
                    backgroundColor: 'rgba(76, 201, 240, 0.1)',
                    tension: 0.3,
                    fill: true
                },
                {
                    label: 'Maths',
                    data: [],
                    borderColor: '#f72585',
                    backgroundColor: 'rgba(247, 37, 133, 0.1)',
                    tension: 0.3,
                    fill: true
                },
                {
                    label: 'Total Percentage',
                    data: [],
                    borderColor: '#7209b7',
                    backgroundColor: 'rgba(114, 9, 183, 0.1)',
                    tension: 0.3,
                    fill: true
                }
            ]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 100,
                    title: {
                        display: true,
                        text: 'Percentage'
                    }
                }
            }
        }
    });
    
    renderTestPerformanceChart();
}

// Render test performance chart
function renderTestPerformanceChart() {
    const completedTests = tests.filter(test => test.completed).sort((a, b) => new Date(a.date) - new Date(b.date));
    
    const labels = completedTests.map(test => test.name);
    const physicsData = completedTests.map(test => Math.round((test.score.physics / 60) * 100));
    const chemistryData = completedTests.map(test => Math.round((test.score.chemistry / 60) * 100));
    const mathsData = completedTests.map(test => Math.round((test.score.maths / 60) * 100));
    const totalData = completedTests.map(test => test.score.percentage);
    
    window.testPerformanceChart.data.labels = labels;
    window.testPerformanceChart.data.datasets[0].data = physicsData;
    window.testPerformanceChart.data.datasets[1].data = chemistryData;
    window.testPerformanceChart.data.datasets[2].data = mathsData;
    window.testPerformanceChart.data.datasets[3].data = totalData;
    window.testPerformanceChart.update();
}

// Save tests
function saveTests() {
    localStorage.setItem('tests', JSON.stringify(tests));
}

// Event listeners for tests
document.getElementById('addTestBtn').addEventListener('click', () => {
    document.querySelector('#addTestModal .modal-title').textContent = 'Add New Test';
    document.getElementById('addTestModal').dataset.editingId = '';
    document.getElementById('testName').value = '';
    document.getElementById('testDate').value = formatDate(new Date());
    document.getElementById('testPhysics').checked = true;
    document.getElementById('testChemistry').checked = true;
    document.getElementById('testMaths').checked = true;
    document.getElementById('testNotes').value = '';
    document.getElementById('addTestModal').style.display = 'flex';
    document.getElementById('testName').focus();
});

document.getElementById('saveTestBtn').addEventListener('click', () => {
    const editingId = document.getElementById('addTestModal').dataset.editingId;
    if (editingId) {
        saveEditedTest();
    } else {
        addTest();
    }
});

document.getElementById('cancelTestBtn').addEventListener('click', () => {
    document.getElementById('addTestModal').style.display = 'none';
});

document.getElementById('closeAddTestModal').addEventListener('click', () => {
    document.getElementById('addTestModal').style.display = 'none';
});

document.getElementById('saveTestScoreBtn').addEventListener('click', submitTestScore);
document.getElementById('cancelSubmitScoreBtn').addEventListener('click', () => {
    document.getElementById('submitScoreModal').style.display = 'none';
});
document.getElementById('closeSubmitScoreModal').addEventListener('click', () => {
    document.getElementById('submitScoreModal').style.display = 'none';
});

// Score calculation
document.getElementById('physicsScore').addEventListener('input', calculateTestScore);
document.getElementById('chemistryScore').addEventListener('input', calculateTestScore);
document.getElementById('mathsScore').addEventListener('input', calculateTestScore);

// Syllabus sliders
document.getElementById('physicsSyllabus').addEventListener('input', function() {
    document.getElementById('physicsSyllabusValue').textContent = `${this.value}%`;
});
document.getElementById('chemistrySyllabus').addEventListener('input', function() {
    document.getElementById('chemistrySyllabusValue').textContent = `${this.value}%`;
});
document.getElementById('mathsSyllabus').addEventListener('input', function() {
    document.getElementById('mathsSyllabusValue').textContent = `${this.value}%`;
});
document.getElementById('saveSyllabusBtn').addEventListener('click', saveSyllabus);
    </script>


<script>
    // Save and load theme
    const themeToggle = document.getElementById('themeToggle');
    const root = document.documentElement;
    if (localStorage.getItem("theme") === "dark") {
        root.setAttribute("data-theme", "dark");
    }

    themeToggle?.addEventListener("click", () => {
        if (root.getAttribute("data-theme") === "dark") {
            root.removeAttribute("data-theme");
            localStorage.setItem("theme", "light");
        } else {
            root.setAttribute("data-theme", "dark");
            localStorage.setItem("theme", "dark");
        }
    });

    // Example: Persist Today's Tasks
    const todayTasksList = document.getElementById('todayTasks');

    function saveTasks() {
        const tasks = [];
        document.querySelectorAll('#todayTasks .task-item').forEach(item => {
            tasks.push({
                html: item.outerHTML
            });
        });
        localStorage.setItem("todayTasks", JSON.stringify(tasks));
    }

    function loadTasks() {
        const data = localStorage.getItem("todayTasks");
        if (data) {
            const tasks = JSON.parse(data);
            tasks.forEach(t => {
                const temp = document.createElement("div");
                temp.innerHTML = t.html;
                todayTasksList.appendChild(temp.firstChild);
            });
        }
    }

    // Call on load
    loadTasks();

    // Example Hook - In real usage, call saveTasks when adding/updating tasks
    document.getElementById("addTaskBtn")?.addEventListener("click", () => {
        setTimeout(saveTasks, 500); // simulate saving after user adds
    });

    document.getElementById("completeAllBtn")?.addEventListener("click", () => {
        saveTasks(); // simulate saving after user completes
    });
</script>

<script>
    // Responsive Sidebar Toggle for Mobile
    const menuToggle = document.getElementById("menuToggle");
    const sidebar = document.getElementById("sidebar");

    menuToggle?.addEventListener("click", () => {
        sidebar.classList.toggle("active");
    });

    document.getElementById("sidebarToggle")?.addEventListener("click", () => {
        sidebar.classList.remove("active");
    });

    // Save current page (tab) to localStorage
    const sidebarLinks = document.querySelectorAll(".sidebar-link");
    sidebarLinks.forEach(link => {
        link.addEventListener("click", () => {
            localStorage.setItem("currentPage", link.getAttribute("data-page"));
        });
    });

    window.addEventListener("load", () => {
        const savedPage = localStorage.getItem("currentPage");
        if (savedPage) {
            document.querySelectorAll(".page-content").forEach(p => p.style.display = "none");
            document.getElementById(savedPage + "Page")?.style?.setProperty("display", "block");
            sidebarLinks.forEach(l => l.classList.remove("active"));
            document.querySelector(`.sidebar-link[data-page="${savedPage}"]`)?.classList.add("active");
        }
    });
</script>

<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js")
      .then(() => console.log("Service Worker Registered"));
  }
     
</script>
     <script>

// Task management using localStorage

let tasks = [];

// Load tasks from localStorage when page loads
function loadTasks() {
    const storedTasks = localStorage.getItem('tasks');
    if (storedTasks) {
        tasks = JSON.parse(storedTasks);
    } else {
        tasks = [];
    }
    renderTasks();
}

// Save tasks to localStorage
function saveTasks() {
    localStorage.setItem('tasks', JSON.stringify(tasks));
}

// Render tasks on screen
function renderTasks() {
    const todayTasksList = document.getElementById('todayTasks');
    todayTasksList.innerHTML = '';

    tasks.forEach(task => {
        const li = document.createElement('li');
        li.className = 'task-item';
        li.innerHTML = `
            <div class="task-content">
                <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} onchange="toggleTask('${task.id}')">
                <div class="task-name ${task.completed ? 'completed' : ''}">${task.name}</div>
            </div>
            <div class="task-date">${task.date}</div>
        `;
        todayTasksList.appendChild(li);
    });
}

// Add new task
function addTask(name, date) {
    const newTask = {
        id: Date.now().toString(),
        name: name,
        date: date,
        completed: false
    };
    tasks.push(newTask);
    saveTasks();
    renderTasks();
}

// Toggle task complete/incomplete
function toggleTask(id) {
    const task = tasks.find(t => t.id === id);
    if (task) {
        task.completed = !task.completed;
        saveTasks();
        renderTasks();
    }
}

// When page loads
window.onload = function() {
    loadTasks();
}

// Example: You should connect addTask() function to your Save Task button!

</script>
<script>
  const form = document.getElementById("syllabusForm");
  const output = document.getElementById("syllabusOutput");

  function loadSyllabus() {
    const data = JSON.parse(localStorage.getItem("syllabusEntries")) || [];
    output.innerHTML = "";
    data.reverse().forEach(entry => {
      const backlog = entry.marks < 30 ? '<span class="badge badge-danger">‚ö† Backlog</span>' : '';
      const html = `
        <div class="card" style="margin-bottom: 15px;">
          <div class="card-body">
            <p><strong>üìò Chapter:</strong> ${entry.chapter}</p>
            <p><strong>üéì Class:</strong> ${entry.className}</p>
            <p><strong>üìä Avg Marks:</strong> ${entry.marks} ${backlog}</p>
            <p><strong>üß≠ Level:</strong> ${entry.level}</p>
          </div>
        </div>
      `;
      output.innerHTML += html;
    });
  }

  form.addEventListener("submit", function(e) {
    e.preventDefault();

    const chapter = document.getElementById("chapterName").value;
    const className = document.getElementById("className").value;
    const marks = parseFloat(document.getElementById("avgMarks").value);
    const level = document.getElementById("chapterLevel").value;

    const entry = { chapter, className, marks, level };
    const data = JSON.parse(localStorage.getItem("syllabusEntries")) || [];
    data.push(entry);
    localStorage.setItem("syllabusEntries", JSON.stringify(data));

    form.reset();
    loadSyllabus();
  });

  // Auto-load entries when the page is shown
  document.querySelectorAll('[data-page]').forEach(link => {
    link.addEventListener("click", function() {
      const pageId = this.getAttribute("data-page");
      if (pageId === "syllabusdone") {
        loadSyllabus();
      }
    });
  });
</script>



</body>



</html>